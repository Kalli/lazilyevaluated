{"version":3,"sources":["steps.md","BarChart.js","lib.js","ScrollyTelling.js","charts/Chart.js","charts/BeeSwarmChart.js","charts/CandleStickChart.js","textHandling.js","charts/ClusterChart.js","charts/ChartWrapper.js","Container.js","Rotate.js","Sections.js","navbar.js","App.js","index.js"],"names":["module","exports","BarChart","props","createGraph","data","w","h","color","margin","width","height","svg","select","ref","current","attr","x","scaleBand","domain","range","length","padding","y","scaleLinear","max","map","e","append","selectAll","join","d","i","bandwidth","call","g","axisBottom","tickFormat","tickSizeOuter","style","axisLeft","ticks","remove","text","React","createRef","this","Component","fillColor","category","categories","interpolateWarm","indexOf","factorial","n","ScrollyTelling","stepsData","draw","filters","region","selectedNodes","scroll","chartType","country","state","steps","links","reduce","acc","weight","source","target","nodes","filter","includes","club_id","clubCount","averageWeight","combinations","Math","floor","averageResidency","number_of_unique_artists","total_number_of_artists","toFixed","fetch","then","response","html","marked","Object","keys","forEach","k","replace","split","setState","stepHtml","className","dangerouslySetInnerHTML","__html","step","key","onStepEnter","enter","offset","Chart","initial","left","right","top","bottom","legend","active","t","transition","duration","node","BeeSwarmChart","group","drawGraph","clickHandler","filterNodes","calculateInitialPositions","id","exit","newNode","radius","merge","highlightSelected","stepBand","yScale","random","xScale","number_of_dates","groups","Set","createLegend","yOffset","translate","axis","tickValues","concat","labelOffset","CandleStickChart","candleStickData","groupBy","push","sort","a","b","ceil","min","count","exitPrevChart","on","click","tooltip","tooltipData","detail","event","pageX","pageY","Array","from","bw","each","agg","mean","drawBox","percentile_5","percentile_95","drawWhiskers","drawMean","addLabel","start","rows","club","CHAR_W","A","B","C","c","D","E","F","f","G","H","I","J","j","K","L","l","M","m","N","O","o","P","p","Q","q","R","r","S","s","T","U","u","V","v","W","X","Y","Z","z","fitTextToScreen","fittedText","ClusterChart","decay","timer","elapsed","dt","simulation","force","strength","pow","stop","cluster","zoom","zoomGroup","transform","drag","dragstarted","dragged","dragended","calculateRadius","alphaTarget","restart","setTimeout","tick","groupCount","clusters","angle","PI","cos","sin","alpha","sqrt","initialize","_","fx","fy","forceSimulation","forceCenter","forceX","forceY","forceCollide","zoomHandler","scaleExtent","type","nodeName","sizes","radiuses","followers","log","ChartWrapper","ChartType","chart","newChart","Container","controlHeight","onNodeClick","index","splice","slice","setFilters","name","value","parseInt","updateWindowDimensions","document","documentElement","clientWidth","clientHeight","svgWidth","svgHeight","element","direction","window","removeEventListener","addEventListener","chartWrapper","header","entries","artists","artistLink","clubButton","parentClub","clubId","percentage","onClick","clubButtonClickHandler","find","selectedClubs","artistName","artist_names_to_ids","artistId","toLowerCase","href","rel","union","ids","overlap","prevProps","prevState","every","constructor","setChartType","clubs","showClub","createClubTable","imgPath","process","img","logo","src","alt","link","icon","faTimesCircle","backgroundColor","attending","tableRows","createTable","mostCommonArtists","mostSimilarClubs","groupClubs","stats","showClubs","showGroup","showSimilarities","showClubInfo","Rotate","faMobileAlt","faSyncAlt","spin","Intro","content","faChevronDown","intro","Outro","Section","contentClass","Navbar","App","loading","json","node_keys","link_keys","loadData","container","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.19ce6297.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/steps.bc0e7744.md\";","import React, {Component} from 'react'\nimport {select} from 'd3-selection'\nimport {scaleBand, scaleLinear} from 'd3-scale'\nimport {axisLeft, axisBottom} from 'd3-axis'\nimport {range, max} from 'd3-array'\n\n\nclass BarChart extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.ref = React.createRef()\n\t}\n\n\tcomponentDidMount() {\n\t\tconst {data, width, height, color} = this.props\n\t\tthis.createGraph(data, width, height, color)\n\t}\n\n\tcreateGraph = (data, w, h, color) => {\n\t\tvar margin = {top: 10, right: 0, bottom: 70, left: 40}\n\t    const width = w - margin.left - margin.right\n\t    const height = h - margin.top - margin.bottom\n\n\t\tconst svg = select(this.ref.current).attr(\"viewBox\", [0, 0, w, h])\n\n\t\tconst x = scaleBand()\n\t\t\t.domain(range(data.length))\n\t\t\t.range([margin.left, width - margin.right])\n            .padding(0.1)\n\n\t\tconst y = scaleLinear()\n\t\t\t.domain([0, max(data.map(e=>[e[1]]))])\n\t\t\t.range([height, margin.top])\n\n\t\tconst xAxis = g => g\n\t\t    .attr(\"transform\", `translate(0,${h - margin.bottom - margin.top})`)\n            .call(\n            \taxisBottom(x).tickFormat(i => data[i][0]).tickSizeOuter(0)\n            ).selectAll(\"text\")\n\t\t     .style(\"text-anchor\", \"end\")\n\t\t     .attr(\"dx\", \"-.8em\")\n\t\t     .attr(\"dy\", \".15em\")\n\t\t     .attr(\"transform\", \"rotate(-65)\")\n\n\t\tconst yAxis = g => g\n\t\t    .attr(\"transform\", `translate(${margin.left},0)`)\n\t\t    .call(axisLeft(y).ticks(5))\n\t\t    .call(g => g.select(\".domain\").remove())\n\t\t    .call(g => g.append(\"text\")\n\t\t        .attr(\"x\", -margin.left)\n\t\t        .attr(\"y\", 10)\n\t\t        .attr(\"fill\", \"currentColor\")\n\t\t        .attr(\"text-anchor\", \"start\")\n\t\t        .text(data.y))\n\n\t\tsvg\n\t\t\t.append(\"g\")\n\t\t\t\t.attr(\"fill\", color)\n\t\t\t.selectAll(\"rect\")\n\t\t\t.data(data)\n\t\t\t.join(\"rect\")\n\t\t\t\t.attr(\"x\", (d, i) => x(i))\n\t\t\t\t.attr(\"y\", d => y(d[1]))\n\t\t\t\t.attr(\"height\", d =>  y(0) - y(d[1]))\n\t\t\t\t.attr(\"width\", x.bandwidth())\n\n\t\tsvg.append(\"g\").call(xAxis)\n\t\tsvg.append(\"g\").call(yAxis)\n\t}\n\n\trender() {\n\t\treturn <svg ref={this.ref}\n\t\t     width={this.props.width}\n\t\t     height={this.props.height}\n\t\t/>\n\t}\n}\n\nexport default BarChart","import {interpolateWarm} from 'd3-scale-chromatic'\nimport React from \"react\"\n\nfunction fillColor(category, categories){\n\treturn interpolateWarm(\n\t\tcategories.indexOf(category) / categories.length\n\t)\n}\n\nconst factorial = (n) => !(n > 1) ? 1 : factorial(n - 1) * n;\n\n\nfunction artistLink(artistName, artist_names_to_ids){\n\tconst artistId = ( artist_names_to_ids[artistName] ||\n\t\t\tartistName.toLowerCase().replace(' ', '')\n\t)\n\treturn <a\n\t\thref={'https://www.residentadvisor.net/dj/' + artistId}\n\t\trel={'noopener noreferrer'}\n\t\ttarget={'_blank'}\n\t>\n\t\t{artistName}\n\t</a>\n}\n\nexport {fillColor, factorial, artistLink}\n","import React, {Component} from \"react\"\nimport {Scrollama, Step} from \"react-scrollama\"\nimport marked from \"marked\"\nimport steps from \"./steps.md\"\nimport \"./ScrollyTelling.scss\"\nimport {factorial} from \"./lib\"\n\n\nclass ScrollyTelling extends Component {\n\n\tstepsData = [\n\t\t{draw: true, filters: {region: \"all\"}, selectedNodes: [], scroll: true},\n\t\t{filters: {region: \"Berlin\"}, chartType: \"Cluster\", selectedNodes: []},\n\t\t{filters: {country: \"all\"}, chartType: \"Cluster\", selectedNodes: [] },\n\t\t{filters: {region: \"all\"}, chartType: \"BeeSwarm\", selectedNodes: []},\n\t\t{filters: {region: \"all\"}, chartType: \"BeeSwarm\", selectedNodes: []},\n\t\t{filters: {region: \"all\"}, chartType: \"CandleStick\", selectedNodes: []},\n\t]\n\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tsteps: null,\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\t// fetch the markdown and replace any variables\n\t\tconst {source, target, weight} = this.props.links.reduce((acc, e)=>{\n\t\t\treturn acc.weight > e.weight? acc : e\n\t\t}, {weight: 0})\n\n\t\t// Show De School and Berghain in step 4\n\t\tthis.stepsData[2].selectedNodes = this.props.nodes.filter((e) => {\n\t\t\treturn [112491, 5031].includes(e.club_id)\n\t\t})\n\t\tconst clubCount = this.props.nodes.length\n\t\tconst total = this.props.links.reduce((acc, e) => acc+e.weight, 0)\n\t\tconst averageWeight = total / this.props.links.length\n\t\tconst combinations = Math.floor(\n\t\t\tfactorial(clubCount) / (2 * factorial(clubCount - 2))\n\t\t)\n\n\t\tconst averageResidency = (this.props.nodes.reduce((acc, e) => {\n\t\t\tif (e.number_of_unique_artists !== 0){\n\t\t\t\treturn acc + e.total_number_of_artists / e.number_of_unique_artists\n\t\t\t}\n\t\t\treturn acc\n\t\t}, 0) / clubCount).toFixed(2)\n\n\t\tconst data = {\n\t\t\t\"$clubCount\": clubCount,\n\t\t\t\"$linkCount\": this.props.links.length,\n\t\t\t\"$source\": source,\n\t\t\t\"$target\": target,\n\t\t\t\"$weight\": (weight*100).toFixed(0),\n\t\t\t\"$combinations\": combinations,\n\t\t\t\"$averageWeight\": (averageWeight*100).toFixed(0.2),\n\t\t\t\"$averageResidency\": averageResidency,\n\t\t}\n\n\t\tfetch(steps)\n\t\t\t.then(response => {\n\t\t\t\treturn response.text()\n\t\t\t})\n\t\t\t.then(text => {\n\t\t\t\tlet html = marked(text)\n\t\t\t\tObject.keys(data).forEach(k => html = html.replace(k, data[k]))\n\t\t\t\tconst steps = html.split('<hr>')\n\t\t\t\tthis.setState({steps: steps})\n\t\t\t})\n\t}\n\n\tstep(stepHtml) {\n\t\treturn <div className={\"step \"}>\n\t\t\t<div dangerouslySetInnerHTML={{__html: stepHtml}} />\n\t\t</div>\n\t}\n\n\trender() {\n\n\t\tif (!this.state.steps){\n\t\t\treturn \"\"\n\t\t}\n\n\t\tconst steps = this.state.steps.map((step, i) => {\n\t\t\treturn <Step key={i} data={this.stepsData[i]}>\n\t\t\t\t{this.step(step)}\n\t\t\t</Step>\n\t\t})\n\t\treturn <div className={\"scroller\"}>\n\t\t\t<Scrollama\n\t\t\t\tonStepEnter={this.props.enter}\n\t\t\t\toffset={0.75}\n\t\t\t>\n\t\t\t\t{steps}\n\t\t\t</Scrollama>\n\t\t</div>\n\t}\n}\n\nexport default ScrollyTelling","import {select, selectAll} from 'd3-selection'\nimport {transition} from 'd3-transition'\n\n// Common chart functionality\nclass Chart{\n\n\tconstructor(svg, margin, categories, h, w) {\n\t\tthis.svg = svg\n\t\tthis.initial = true\n\t\tthis.margin = margin\n\t\tthis.categories = categories\n\t\tthis.width = w - this.margin.left - this.margin.right\n\t    this.height = h - this.margin.top - this.margin.bottom\n\t\tthis.legend = null\n\t\tthis.active = true\n\t\tthis.t = transition().duration(1500)\n\t}\n\n\tcreateGraph(nodes){\n\t\tif (!this.g) {\n\t\t\tthis.g = select(this.svg)\n\t\t\t\t.append(\"g\")\n\t\t\t\t.attr(\"class\", \"graph\")\n\t\t\tthis.node = this.g.selectAll(\"circle\")\n\t\t}\n\t\tthis.g.transition(1000).attr(\"transform\", \"translate(0, 0), scale(1)\")\n\t}\n\n\thighlightSelected(selectedNodes){\n\t\t// highlight selected nodes if any\n\t\tthis.g\n\t\t\t.selectAll(\".nodes\")\n\t\t\t.style(\"opacity\", (d)=>{\n\t\t\t\treturn selectedNodes.includes(d)? 0.6 : 1\n\t\t\t})\n\t\tthis.g\n\t\t\t.selectAll(\".label\")\n\t\t\t.attr(\"text-decoration\", (d)=>{\n\t\t\t\treturn selectedNodes.includes(d)? \"underline\" : \"\"\n\t\t\t})\n\t}\n\n\texit(){\n\t\tthis.active = false\n\t\tselectAll(\".legend\").transition(2500).style(\"opacity\", 0).remove()\n\t}\n}\n\nexport {Chart}","import {select} from 'd3-selection'\nimport {scaleLinear, scaleBand} from 'd3-scale'\nimport {max} from 'd3-array'\nimport {axisBottom} from 'd3-axis'\nimport './Chart.scss'\nimport {Chart} from \"./Chart\"\nimport {fillColor} from \"../lib\"\n\nclass BeeSwarmChart extends Chart{\n\n\n\tconstructor(svg, margin, categories, h, w) {\n\t\tsuper(svg, margin, categories, h, w)\n\t\tthis.groups = []\n\t\tthis.radius = 15\n\t}\n\n\ty = e => e.group\n\n\tx = e => {\n\t\treturn e.number_of_unique_artists !== 0?\n\t\t\te.total_number_of_artists / e.number_of_unique_artists : 0\n    }\n\n\tcreateGraph(nodes){\n\t\tsuper.createGraph(nodes)\n\n\t\t// filter out 0 attributes from nodes\n\t\tthis.filterNodes(nodes)\n\n\t\t// how many bands do we have on the y axis\n\t\tthis.groups = [...new Set(this.nodes.map(e => this.y(e)))]\n\n        this.xScale = scaleLinear()\n            .domain([1, max(this.nodes, d => this.x(d))])\n            .range([\n            \tthis.margin.left,\n\t            this.width - this.margin.right - this.margin.left\n            ])\n\n        this.yScale = scaleBand()\n            .domain(this.groups)\n            .range([\n            \tthis.margin.top,\n\t            this.height + this.margin.top - this.margin.bottom\n            ])\n\t\tthis.createLegend()\n\t\t// resize all nodes\n\t\tthis.node.selectAll(\"circle\")\n\t\t\t.transition(this.t)\n\t\t\t.attr(\"r\", this.radius)\n\n\t\t// and hide labels\n\t\tthis.node.selectAll(\"text\")\n\t\t\t.transition(this.t)\n\t\t\t.style(\"opacity\", \"0\")\n\t\t\t.style(\"display\", \"none\")\n\t\t\t.text(d => d.id + \" - \" + this.x(d).toFixed(2))\n\t}\n\n\tdrawGraph = (nodes, clickHandler, selectedNodes) => {\n\n\t\tthis.filterNodes(nodes)\n\t\tif (this.initial){\n\t\t\tthis.calculateInitialPositions()\n\t\t}\n\n\t\tthis.node = this.node.data(this.nodes, d => d.id)\n\t\tthis.node.exit()\n\t\t\t.remove()\n\n\t\tlet newNode = this.node.enter()\n\t\t\t.append(\"g\")\n\n\t\tnewNode\n\t\t\t.append(\"circle\")\n\t\t\t.attr(\"r\", this.radius)\n\t\t\t.attr(\"fill\", d => fillColor(d.group, this.categories))\n\t\t\t.attr(\"class\", \"nodes\")\n\t\t\t.style(\"fill-opacity\", this.initial? 1: 0)\n\n\t\tnewNode\n\t\t\t.append(\"text\")\n\t\t\t.style(\"opacity\", \"0\")\n\t\t\t.style(\"display\", \"none\")\n\t\t\t.text(d => d.id + \" - \" + this.x(d).toFixed(2))\n\n\t\tthis.node = this.node.merge(newNode)\n\t    // if we are transitioning from another chart:\n\t\tif (this.initial){\n\t\t    this.node.transition(this.t)\n                .attr(\"transform\", d => \"translate(\"+d.x + \",\" + d.y+\")\")\n\t\t}\n\n\t\tthis.highlightSelected(selectedNodes)\n\t\tthis.initial = false\n\t}\n\n\tcalculateInitialPositions = () => {\n\t\t// Calculate positions\n\t\tconst stepBand = Math.floor(this.yScale.step()/this.radius)\n\t\tthis.nodes.forEach((e, i) => {\n\t\t\tconst offset = Math.floor(Math.random() * stepBand)\n\t        e.x  = this.xScale(this.x(e))\n            e.y = this.yScale(this.y(e)) + offset * this.radius\n\t\t})\n\t}\n\n\tfilterNodes = (nodes) => {\n\t\tconst minDates = 10\n\t\tconst minArtists = 20\n\t\tthis.nodes = nodes.filter(e =>{\n\t\t\treturn (\n\t\t\t\tthis.x(e) !== 0 &&\n\t\t\t\te.number_of_unique_artists > minArtists &&\n\t\t\t\te.number_of_dates > minDates\n\t\t\t)\n\t\t})\n\t}\n\n\tcreateLegend(){\n\t\tconst yOffset = this.height + this.margin.top - this.margin.bottom\n\t\tconst translate = `translate(0, ${yOffset})`\n\t\tthis.legend = select(this.svg)\n\t\t\t.append(\"g\")\n\t\t\t.attr(\"class\", \"legend\")\n\t\t\t.attr(\"transform\", translate)\n\t\tconst axis = axisBottom(this.xScale)\n\t\t\t.tickValues(this.xScale.ticks().concat(this.xScale.domain()))\n\t\tthis.legend.call(axis)\n\n\t\tconst labelOffset = `translate(0, ${this.margin.top + 20})`\n\t\tselect(this.svg)\n\t\t\t.append(\"g\")\n\t\t\t.attr(\"transform\", labelOffset)\n\t\t\t.attr(\"class\", \"label legend\")\n\t\t\t.append('text')\n\t\t    .text(\"Average number of bookings per artist by club in 2019\");\n\t}\n}\n\nexport {BeeSwarmChart}","import {select, event} from 'd3-selection'\nimport {scaleLinear, scaleBand} from 'd3-scale'\nimport {max} from 'd3-array'\nimport {axisBottom} from 'd3-axis'\nimport './Chart.scss'\nimport {Chart} from \"./Chart\"\n\n\nclass CandleStickChart extends Chart{\n\n\tconstructor(svg, margin, categories, h, w) {\n\t\tsuper(svg, margin, categories, h, w)\n\t\tthis.groups = []\n\t\tthis.tooltipData = null\n\t}\n\n\ty = e => {\n\t\treturn this.groups.indexOf(e)\n\t}\n\n\tx = e => {\n\t\treturn e.number_of_unique_artists !== 0?\n\t\t\te.total_number_of_artists / e.number_of_unique_artists : 0\n    }\n\n    candleStickData = () => {\n\t\tconst groups = this.nodes.reduce((acc, e) => {\n\t\t\tconst key = e[this.groupBy]\n\t\t\tacc[key] ? acc[key].push(e) : acc[key] = [e]\n\t\t\treturn acc\n\t\t}, {})\n\t    return Object.keys(groups).reduce((acc, key) => {\n\t    \tconst nodes = groups[key].sort((a, b) => this.x(b) - this.x(a))\n\t\t    const d = nodes.map(e => this.x(e)).sort()\n\t\t    acc.push({\n\t\t\t    'percentile_95': d[Math.floor(0.95*d.length)-1],\n\t\t\t    'percentile_5': d[Math.ceil(0.05*d.length)],\n\t\t\t\t'mean': d.reduce((acc, e) => acc + e, 0) / d.length,\n\t\t\t    'max': Math.max(...d),\n\t\t\t    'min': Math.min(...d),\n\t\t\t    'count': d.length,\n\t\t\t    'id': key,\n\t\t\t    'nodes': nodes\n\t\t    })\n\t    \treturn acc\n\t    }, []).filter((e) => e.count > 1)\n\t}\n\n\tcreateGraph(nodes){\n\t\tsuper.createGraph(nodes)\n\t\tthis.groupBy = 'region'\n\n\t\t// filter out 0 attributes from nodes\n\t\tthis.filterNodes(nodes)\n\t\tthis.data = this.candleStickData()\n\t\t// how many bands do we have on the y axis\n\t\tthis.groups = [...new Set(this.data.map(e => e.id))]\n\n        this.xScale = scaleLinear()\n            .domain([1, max(this.nodes, d => this.x(d))])\n            .range([\n            \tthis.margin.left,\n\t            this.width - this.margin.right - this.margin.left\n            ])\n\n        this.yScale = scaleBand()\n            .domain(Array.from(Array(this.groups.length).keys()))\n            .range([\n            \tthis.margin.top,\n\t            this.height + this.margin.top - this.margin.bottom\n            ])\n\t\tthis.createLegend()\n\t\tthis.bw = this.yScale.bandwidth();\n\t}\n\n\texitPrevChart(){\n\t\tlet n = 0\n\t\tthis.node.exit()\n\t\t\t.each(() => n++)\n\t\t\t.attr(\"class\", \"candlestick\")\n\t\t\t.transition(\"exit\").duration(2000)\n            .attr(\"transform\", d => {\n            \tconst agg = this.data.filter(e => e.id === d[this.groupBy])[0]\n\t            const x = agg? this.xScale(agg.mean) : 0\n            \tconst y = this.yScale(this.y(d.region)) + this.bw / 2\n\t            if (x === 0){\n\t            \treturn \"scale(0, 0)\"\n\t            }\n            \treturn \"translate(\"+ x + \",\" + (y? y : 0) +\")\"\n            })\n\t\t\t.on('end', () => {\n\t\t\t\tn--\n\t\t\t\tif (n === 0){\n\t\t\t\t\tthis.drawBox()\n\t\t\t\t}\n\t\t\t})\n\t\t\t.transition().duration(2000)\n\t\t\t.remove()\n\t}\n\n\tdrawBox(){\n\t\tlet n = 0\n\n\t\tthis.newNode\n\t\t\t.each(() => n++)\n\t\t\t.append(\"rect\")\n\t\t\t.attr(\"height\", 0)\n\t\t\t.attr(\"width\", 0)\n\t        .attr(\"class\", \"fill\")\n\t\t\t.attr(\"x\", d => this.xScale(d.mean))\n\t\t\t.attr(\"rx\", 15)\n\t\t\t.attr(\"y\", d => this.yScale(this.y(d.id)) + this.bw / 2)\n\t\t\t.attr(\"ry\", 15)\n\t\t\t.transition(\"drawbox\").duration(1000)\n\t\t\t.attr(\"height\", this.bw)\n\t\t\t\t.attr(\"x\", d => this.xScale(d.percentile_5))\n\t\t\t\t.attr(\"y\", d => this.yScale(this.y(d.id)))\n\t\t\t\t.attr('width', d => {\n\t\t\t\t\tconst start = this.xScale(d.percentile_95)\n\t\t\t\t\tconst end = this.xScale(d.percentile_5)\n\t\t\t\t\treturn start - end\n\t\t\t\t})\n\t\t\t\t.on(\"end\", () => {\n\t\t\t\t\tn--\n\t\t\t\t\tif (n === 0){\n\t\t\t\t\t\tthis.drawWhiskers()\n\t\t\t\t\t\tthis.drawMean()\n\t\t\t\t\t\tthis.addLabel()\n\t\t\t\t\t}\n\t\t\t\t})\n\t}\n\n\tdrawWhiskers(){\n\t\tconst offset = this.bw / 2\n\t\tthis.newNode\n\t\t\t.append(\"line\")\n\t\t\t.attr(\"x1\", d => this.xScale(d.percentile_5))\n\t\t\t.attr(\"x2\", d => this.xScale(d.percentile_5))\n\t\t\t.attr(\"y1\", d => this.yScale(this.y(d.id)) + offset)\n\t\t\t.attr(\"y2\", d => this.yScale(this.y(d.id)) + offset)\n\t        .attr(\"class\", \"line\")\n\t\t\t.transition(\"drawWhiskers1\").duration(1000)\n\t\t\t\t.attr(\"x2\", d => this.xScale(d.min))\n\n\t\tthis.newNode\n\t\t\t.append(\"line\")\n\t\t\t.attr(\"x1\", d => this.xScale(d.percentile_95))\n\t\t\t.attr(\"x2\", d => this.xScale(d.percentile_95))\n\t\t\t.attr(\"y1\", d => this.yScale(this.y(d.id)) + offset)\n\t\t\t.attr(\"y2\", d => this.yScale(this.y(d.id)) + offset)\n\t        .attr(\"class\", \"line\")\n\t\t\t.transition(\"drawWhiskers2\").duration(1000)\n\t\t\t\t.attr(\"x2\", d => this.xScale(d.max))\n\n\t}\n\n\taddLabel(){\n\t\t// text\n\t\tthis.newNode\n\t\t\t.append(\"text\")\n\t\t\t.attr(\"x\", d => {\n\t\t\t\tconst start = this.xScale(d.percentile_5)\n\t\t\t\tconst length = this.xScale(d.percentile_95) - start\n\t\t\t\treturn start + (length / 2)\n\t\t\t})\n\t\t\t.attr(\"y\", d => this.yScale(this.y(d.id)) + this.bw/2)\n\t\t\t.attr(\"text-anchor\", \"middle\")\n\t\t\t.attr(\"class\", \"label\")\n\t\t\t.style(\"fill\", \"#fff\")\n            .style(\"font-size\", 12)\n            .text(d => `${d.id} (${d.count})`)\n\t}\n\n\tdrawMean(){\n\t\t// mean\n\t\tthis.newNode\n\t\t\t.append(\"line\")\n\t\t\t.attr(\"x1\", d => this.xScale(d.mean))\n\t\t\t.attr(\"x2\", d => this.xScale(d.mean))\n\t\t\t.attr(\"y1\", d => this.yScale(this.y(d.id)))\n\t\t\t.attr(\"y2\", d => this.yScale(this.y(d.id)) + this.bw)\n\t        .attr(\"class\", \"mean\")\n\t}\n\n\tdrawGraph = (nodes, clickHandler, selectedNodes) => {\n\t\tthis.filterNodes(nodes)\n\n\t\tthis.node = this.node.data(this.data, d=> d.id)\n\n\t\tthis.newNode = this.node.enter()\n\t\t\t.append(\"g\")\n\t\t\t.attr(\"class\", \"candlestick\")\n\n\t\tthis.exitPrevChart()\n\n\t\tthis.newNode.on(\"click\", d => this.click(d))\n\t\tthis.tooltip = select(\"#tooltip\")\n\n\t\tthis.node = this.node.merge(this.newNode)\n\t\tthis.initial = false\n\t}\n\n\tclick = (d) => {\n\t\tif(this.tooltipData !== d){\n\t\t    this.tooltip.transition().duration(200).style(\"opacity\", 1)\n\t\t\tthis.tooltip.html(this.detail(d))\n\t\t         .style(\"left\", (event.pageX) + \"px\")\n\t\t         .style(\"top\", (event.pageY - 28) + \"px\")\n\t\t\tthis.tooltipData = d\n\t\t}else{\n\t\t    this.tooltip.transition().duration(500).style(\"opacity\", 0)\n\t\t\tthis.tooltipData = null\n\t\t}\n\t}\n\n\tfilterNodes = (nodes) => {\n\t\tconst minDates = 10\n\t\tconst minArtists = 20\n\t\tthis.nodes = nodes.filter(e =>{\n\t\t\treturn (\n\t\t\t\tthis.x(e) !== 0 &&\n\t\t\t\te.number_of_unique_artists > minArtists &&\n\t\t\t\te.number_of_dates > minDates\n\t\t\t)\n\t\t})\n\t}\n\n\tcreateLegend(){\n\t\tconst yOffset = this.height + this.margin.top - this.margin.bottom\n\t\tconst translate = `translate(0, ${yOffset})`\n\t\tthis.legend = select(this.svg)\n\t\t\t.append(\"g\")\n\t\t\t.attr(\"class\", \"legend\")\n\t\t\t.attr(\"transform\", translate)\n\t\tconst axis = axisBottom(this.xScale)\n\t\t\t.tickValues(this.xScale.ticks().concat(this.xScale.domain()))\n\t\tthis.legend.call(axis)\n\n\t\tconst labelOffset = `translate(0, ${this.margin.top + 20})`\n\t\tselect(this.svg)\n\t\t\t.append(\"g\")\n\t\t\t.attr(\"transform\", labelOffset)\n\t\t\t.attr(\"class\", \"label legend\")\n\t\t\t.append('text')\n\t\t    .text(\"Average number of bookings per artist by region in 2019\")\n\t}\n\n\tdetail(data){\n\t\tconst rows = data.nodes.map(club => {\n\t\t\treturn `<tr>\n\t\t\t\t<td>${club.id}</td>\n\t\t\t\t<td>\n\t\t\t\t\t${(\n\t\t\t\t\t\tclub.total_number_of_artists / club.number_of_unique_artists\n\t\t\t\t\t).toFixed(1)}\n\t\t\t\t</td>\n\t\t\t</tr>`\n\t\t})\n\t\treturn `<h2 class=\"center\">${data.id}</h2>\n\t\t\t<table>\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th>Club Name</th>\n\t\t\t\t\t<th>Average bookings per artist</th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t${rows.join(\"\")}\n\t\t\t</tbody>\n\t\t</table>`\n\t}\n}\n\nexport {CandleStickChart}","// taken from: https://observablehq.com/@gka/cheap-fit-text-to-circle\nconst CHAR_W = {\n\tA:7,a:7,B:8,b:7,C:8,c:6,D:9,d:7,E:7,e:7,F:7,f:4,G:9,g:7,H:9,h:7,I:3,i:3,\n\tJ:5,j:3,K:8,k:6,L:7,l:3,M:11,m:11,N:9,n:7,O:9,o:7,P:8,p:7,Q:9,q:7,R:8,\n\tr:4,S:8,s:6,T:7,t:4,U:9,u:7,V:7,v:6,W:11,w:9,X:7,x:6,Y:7,y:6,Z:7,z:5,\n\t'.':2,',':2,':':2,';':2\n}\n\nfunction fitTextToScreen(text, radius){\n\tconst fittedText = text.split(\"\").reduce((acc, e) => {\n\t\tif (acc.length < 1.6 * radius){\n\t\t\tacc.length = acc.length + (CHAR_W[e] || CHAR_W.a)\n\t\t\tacc.text = acc.text + e\n\t\t}\n\t\treturn acc\n\t}, {length: 0, text: ''}).text\n\tif (fittedText === text){\n\t\treturn text\n\t}\n\treturn fittedText + \"...\"\n}\n\nexport {fitTextToScreen}","import {forceSimulation, forceCenter, forceX, forceY} from \"d3-force\"\nimport {forceCollide} from \"d3-force\"\nimport {select, event} from 'd3-selection'\nimport {drag} from 'd3-drag'\nimport {zoom} from \"d3-zoom\"\nimport {timer} from \"d3-timer\"\nimport {fitTextToScreen} from \"../textHandling\"\nimport {fillColor} from \"../lib\"\nimport './Chart.scss'\nimport {Chart} from \"./Chart\"\n\n\nclass ClusterChart extends Chart{\n\n\tconstructor(svg, margin, categories, h, w) {\n\t\tsuper(svg, margin, categories, h, w)\n\t\tthis.clusters = {}\n\t}\n\n\tcreateGraph(nodes){\n\t\tsuper.createGraph(nodes)\n\t\tconst padding = 1\n\n\t\tthis.simulation = forceSimulation()\n\t\t\t.force('center', forceCenter(this.width/2, this.height/2))\n\t\t\t.force('x', forceX(this.width / 2).strength(0.01))\n\t\t\t.force('y', forceY(this.height / 2).strength(0.01))\n\t\t\t.force('cluster', this.cluster().strength(0.5))\n\t\t\t.force('collide', forceCollide(d => d.radius + padding))\n\n\t\tthis.zoomHandler = zoom()\n\t\t\t.scaleExtent([0.8, 5])\n\t\t\t.filter(() => {\n\t\t\t\treturn event.type !== \"wheel\" || event.target.nodeName !== \"svg\"\n\t\t\t})\n\t\t\t.on(\"zoom\", () => this.zoom(this.g))\n\t\tselect(this.svg).call(this.zoomHandler)\n\n\t\tthis.decay()\n\t\tthis.createLegend()\n\t\t// resize all nodes if we were coming from a different graph\n\t\tthis.node.selectAll(\"circle\")\n\t\t\t.transition(this.t)\n\t\t\t.attr(\"r\", d => this.calculateRadius(d))\n\n\t\t// and show labels\n\t\tthis.node.selectAll(\"text\")\n\t\t\t.transition(this.t)\n\t\t\t.style(\"opacity\", \"1\")\n\t\t\t.style(\"display\", \"block\")\n\t\t\t.text(d => fitTextToScreen(d.id, d.radius))\n\t}\n\n\tdecay = () => {\n\t\tconst transitionTime = 3000\n\t\tconst t = timer((elapsed) => {\n\t        var dt = elapsed / transitionTime\n\t\t    this.simulation\n\t\t\t    .force('collide')\n\t\t\t    .strength(Math.pow(dt, 2))\n\t\t    if (dt >= 1.0){\n\t\t        t.stop()\n\t\t\t    // disable forces for less jitter\n\t\t\t    this.simulation.force(\"x\", null)\n\t\t\t    this.simulation.force(\"y\", null)\n\t\t\t    this.simulation.force(\"center\", null)\n                this.simulation.force('cluster', this.cluster().strength(0.1))\n\t\t    }\n\t\t})\n\t}\n\n\tzoom = (zoomGroup) => {\n\t\tif (!this.active) return\n\t\tzoomGroup.attr(\"transform\", event.transform)\n\t}\n\n\tdrawGraph = (nodes, clickHandler, selectedNodes) => {\n\t\t// prevent nodes from jumping on filter operations\n\t\tif (!this.initial){\n\t\t\tthis.simulation.stop()\n\t\t}\n\t\t// todo this mutates and is ugly\n\t\tif (this.initial){\n\t\t\tthis.calculateInitialPositions(nodes)\n\t\t}\n\n\t\tthis.node = this.node.data(nodes, d=> d.id)\n\t\tthis.node.exit()\n\t\t\t.transition().duration(2000)\n\t\t\t.style(\"opacity\", 0)\n\t\t\t.remove()\n\n\t\tlet newNode = this.node.enter()\n\t\t\t.append(\"g\")\n\t\t\t.on(\"click\", d => clickHandler(d))\n\t\t\t.call(drag()\n\t\t\t\t\t.on(\"start\", d => this.dragstarted(d, this.simulation))\n\t\t\t\t\t.on(\"drag\", d => this.dragged(d))\n\t\t\t\t\t.on(\"end\", d => this.dragended(d, this.simulation))\n\t\t\t)\n\n\n\t\tnewNode\n\t\t\t.append(\"circle\")\n\t\t\t.attr(\"r\", d => this.calculateRadius(d))\n\t\t\t.attr(\"fill\", d => fillColor(d.group, this.categories))\n\t\t\t.attr(\"class\", \"nodes\")\n\t\t\t.style(\"fill-opacity\", this.initial? 1: 0)\n\t\t\t.transition().duration(2000).style(\"fill-opacity\", 1)\n\n\t\tnewNode\n\t\t\t.append(\"text\")\n\t\t\t.attr(\"text-anchor\", \"middle\")\n\t\t\t.attr(\"class\", \"label\")\n\t\t\t.style(\"fill\", \"#fff\")\n\t\t\t.style(\"opacity\", 0)\n            .style(\"font-size\", 12)\n\t\t\t.text(d => fitTextToScreen(d.id, d.radius))\n\t\t\t.transition().duration(2000).style(\"opacity\", 1)\n\n\t\tthis.node = this.node.merge(newNode)\n\n\t\tif (!this.initial){\n\t\t\t// restart simulation so nodes wont get stuck on next filter\n\t\t\tthis.simulation.alphaTarget(0.3).restart()\n\t\t\tsetTimeout( () => {\n\t\t\t\tthis.simulation.alphaTarget(0)\n\t\t\t}, 100)\n\t\t\tthis.decay()\n\t\t}\n\t\tthis.highlightSelected(selectedNodes)\n\n\t\tthis.simulation\n\t\t\t.on('tick', this.tick)\n\t\t\t.nodes(nodes)\n\t\tthis.initial = false\n\t}\n\n\tcalculateInitialPositions = (nodes) => {\n\t\tconst radius = Math.min(this.width, this.height) / 2\n\t\tconst groupCount = Math.max(...nodes.map(e => e.group))\n\t\tthis.clusters = new Array(groupCount)\n\t\tnodes.forEach((e) => {\n\t\t\t// position along a circle, clustered by group\n\t\t\tconst g = e.group\n\t\t\tconst angle = g / groupCount * 2 * Math.PI\n\t        e.x  = Math.cos(angle) * radius + this.width / 2 + Math.random()\n            e.y = Math.sin(angle) * radius + this.height / 2 + Math.random()\n\n\t\t\t// set the radius of each node\n\t\t\tconst r = this.calculateRadius(e)\n\t\t\te.radius = r\n\n\t\t\tif (!this.clusters[g] || r > this.clusters[g]){\n\t\t\t\tthis.clusters[e.group] = e\n\t\t\t}\n\t\t})\n\t}\n\n\ttick = () => {\n\t\tthis.node\n\t\t\t.attr(\"transform\", d => \"translate(\"+d.x + \",\" + d.y+\")\")\n\t}\n\n\tcluster = () => {\n\t\t// adapted from\n\t\t// https://bl.ocks.org/ericsoco/38b4f8b51ecf116e6fb0727d25687e8e\n\t\tlet nodes,\n\t\t\tstrength = 0.1\n\n\t\tconst force = (alpha) => {\n\t\t\t// scale + curve alpha value\n\t\t\talpha *= strength * alpha\n\n\t\t\tnodes.forEach((d) => {\n\t\t\t\tlet cluster = this.clusters[d.group]\n\t\t\t\tif (cluster === d) return\n\t\t\t\tlet x = d.x - cluster.x,\n\t\t\t\t\ty = d.y - cluster.y,\n\t\t\t\t\tl = Math.sqrt(x * x + y * y),\n\t\t\t\t\tr = d.radius + cluster.radius\n\n\t\t\t\tif (l !== r) {\n\t\t\t\t\tl = (l - r) / l * alpha\n\t\t\t\t\td.x -= x *= l\n\t\t\t\t\td.y -= y *= l\n\t\t\t\t\tcluster.x += x\n\t\t\t\t\tcluster.y += y\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\tforce.initialize = function (_) {\n\t\t\tnodes = _\n\t\t}\n\n\t\tforce.strength = _ => {\n\t\t\tstrength = _ == null ? strength : _\n\t\t\treturn force\n\t\t}\n\n\t\treturn force\n\t}\n\n\tdragstarted = (d, simulation) => {\n\t\tif (!this.active) return\n\t\tif (!event.active) simulation.alphaTarget(0.3).restart()\n\t\td.fx = d.x\n\t\td.fy = d.y\n\t}\n\n\tdragged = d => {\n\t\tif (!this.active) return\n\t\td.fx = event.x\n\t\td.fy = event.y\n\t}\n\n\tdragended = (d, simulation) => {\n\t\tif (!this.active) return\n\t\tif (!event.active) simulation.alphaTarget(0)\n\t\td.fx = null\n\t\td.fy = null\n\t}\n\n\tcreateLegend(){\n\t\tconst sizes = [10000, 1000, 100, 10]\n\t\tconst radiuses = sizes.map(e => {\n\t\t\treturn this.calculateRadius({followers: e})\n\t\t})\n\n\t\tconst x = 10\n\t\tconst lineHeight = 30\n\t\tconst y = this.height - 2 * Math.max(...radiuses)\n\n\t    this.legend = select(this.svg)\n\t        .append(\"g\")\n\t\t\t.attr(\"class\", \"legend\")\n\t        .attr(\"x\", x)\n\t        .attr(\"y\", y)\n\t        .attr(\"transform\", `translate(${x}, ${y})`)\n\t        .style(\"text-align\", \"center\")\n\n\t\tconst max = Math.max(...radiuses)\n\t\t// add nodes\n\t\tthis.legend.selectAll(\"rects\")\n\t\t.data(radiuses)\n\t\t.enter()\n\t\t.append(\"circle\")\n\t\t    .attr(\"cx\", max)\n\t\t    .attr(\"cy\", d => 2 * max - (d) + 0.5*lineHeight)\n\t\t    .attr(\"r\", d => d)\n\t\t\t.attr(\"fill\", \"white\")\n\t\t\t.attr(\"stroke\", \"black\")\n\t\t\t.attr(\"alignment-baseline\", \"middle\")\n\n\t\tthis.legend.selectAll(\"rects\")\n\t\t.data(radiuses)\n\t\t.enter()\n\t\t.append(\"text\")\n\t\t    .attr(\"x\", max)\n\t\t    .attr(\"y\", (d, i) => {\n\t\t        // this is messy, but the best looking option I could find\n\t\t\t    // smallest circle is labelled in center, others at the top\n\t\t        if (i === 0){\n\t\t            return 2 * max - 1.4 * d\n\t\t\t    }\n\t\t        if (i === 1){\n\t\t            return 2 * max - 1.2 * d\n\t\t\t    }\n\t\t        return 2 * max - (d) + 0.5*lineHeight\n\t\t    })\n\t\t\t.text((d, i) => sizes[i])\n\t\t\t.attr(\"text-anchor\", \"middle\")\n\n\t\tthis.legend\n\t\t\t.append('text')\n\t\t\t.text(\"RA Club Followers\")\n\t\t\t.attr(\"text-anchor\", \"middle\")\n\t\t\t.attr(\"x\", max)\n\t\t\t.attr(\"y\", 2 * max + lineHeight)\n\t}\n\n\texit(){\n\t\tsuper.exit()\n\t\tthis.simulation.stop()\n\t}\n\n\tcalculateRadius(e){\n\t\t// scale node radius according to svg size\n\t\tconst m = Math.min(this.width, this.height) / 800\n\t\treturn 12 * Math.log(Math.sqrt(e.followers)) * m\n\t}\n\n}\n\n\n\nexport {ClusterChart}","// wrapper around chart classes that allows us to switch between them\n// for transition purposes\n\nclass ChartWrapper{\n\n\tconstructor(svg, margin, categories, h, w, ChartType) {\n\t\tthis.svg = svg\n\t\tthis.initial = true\n\t\tthis.margin = margin\n\t\tthis.categories = categories\n\t\tthis.h = h\n\t\tthis.w = w\n\t\tthis.chart = new ChartType(svg, margin, categories, h, w)\n\t}\n\n    setChartType(nodes, ChartType){\n\t    this.chart.exit()\n        const newChart = new ChartType(\n            this.svg, this.margin, this.categories, this.h, this.w\n        )\n        newChart.g = this.chart.g\n        newChart.node = this.chart.node\n\t    newChart.initial = true\n        newChart.createGraph(nodes)\n        this.chart = newChart\n    }\n\n}\n\nexport {ChartWrapper}","import React, {Component} from 'react'\nimport './container.scss'\nimport BarChart from './BarChart'\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\"\nimport { faTimesCircle } from '@fortawesome/free-solid-svg-icons'\nimport ScrollyTelling from \"./ScrollyTelling\"\nimport {fillColor, artistLink} from \"./lib\"\nimport {BeeSwarmChart} from \"./charts/BeeSwarmChart\"\nimport {CandleStickChart} from \"./charts/CandleStickChart\"\nimport {ClusterChart} from \"./charts/ClusterChart\"\nimport {ChartWrapper} from \"./charts/ChartWrapper\"\n\n\nclass Container extends Component {\n\tcontrolHeight = 70\n\tmargin = {top: 10, right: 20, bottom: 20, left: 50}\n\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.ref = React.createRef()\n\t\t// these are the currently selected values\n\t\t// if you need all values, you should use this.props.data\n\t\tthis.nodes = this.props.data.nodes\n\n\t\tthis.state = {\n\t\t\tselectedNodes: [],\n\t\t\tdata: {},\n\t\t\tfilters: {},\n\t\t\tdraw: true,\n\t\t\tchartType: \"Cluster\",\n\t\t\twidth: document.documentElement.clientWidth,\n\t\t\tsvgWidth: document.documentElement.clientWidth,\n\t\t\tsvgHeight: document.documentElement.clientHeight - this.controlHeight\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('resize', this.updateWindowDimensions)\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.updateWindowDimensions()\n\t\twindow.addEventListener('resize', this.updateWindowDimensions)\n\t\t// sort so adjacent groups get different colors\n\t\tthis.categories = [\n\t\t\t...new Set(this.nodes.map(e => e.group).sort((a, b) => {\n\t\t\t\treturn a % 2 - b % 2 || a - b\n\t\t\t}))\n\t\t]\n\n\t\tconst svg = this.ref.current\n\t\tthis.chartWrapper = new ChartWrapper(\n\t\t\tsvg, this.margin, this.categories,\n\t\t\tthis.state.svgHeight, this.state.svgWidth,\n\t\t\tClusterChart\n\t\t)\n\t}\n\n\tonNodeClick = (node) => {\n\t\t// we allow max two selected nodes at a time\n\t\tlet selectedNodes = (this.state.selectedNodes || [])\n\t\tconst index = selectedNodes.indexOf(node)\n\t\tif (index !== -1){\n\t\t\tselectedNodes.splice(index, 1)\n\t\t}else{\n\t\t\tselectedNodes.push(node)\n\t\t}\n\t\tselectedNodes = selectedNodes.slice(-2)\n\t\tthis.setState({selectedNodes: selectedNodes})\n\t}\n\n\tcreateTable(header, data){\n\t\treturn <tr key={header+\"row\"}>\n\t\t\t<td key={header+\"cell\"}>{header}</td>\n\t\t\t{data.map((e, i) => {\n\t\t\t\treturn <td key={header+\"-\"+i}>{e}</td>\n\t\t\t})}\n\t\t</tr>\n\t}\n\n\tmostCommonArtists(){\n\t\treturn this.state.selectedNodes.map((node, i) => {\n\t\t\treturn Object.entries(node.artists)\n\t\t\t\t.sort((a, b) => b[1] - a[1])\n\t\t\t\t.slice(0, 5)\n\t\t\t\t.map((e, j) => {\n\t\t\t\t\tconst key = \"artist\"+i+\"-\"+j\n\t\t\t\t\treturn <li key={key}>\n\t\t\t\t\t\t{this.artistLink(e[0])}{\" - \" + e[1]}\n\t\t\t\t\t</li>\n\t\t\t\t})\n\t\t})\n\t}\n\n\tmostSimilarClubs(){\n\t\treturn this.state.selectedNodes.map(f => {\n\t\t\treturn this.props.data.links.filter((e) => {\n\t\t\t\treturn [e.source, e.target].includes(f.id)\n\t\t\t})\n\t\t\t.sort((a, b) => b.weight - a.weight)\n\t\t\t.slice(0, 5)\n\t\t\t.reduce((acc, e) => {\n\t\t\t\tconst club = e.source !== f.id? e.source : e.target\n\t\t\t\tacc.push(this.clubButton(f, club, e.weight))\n\t\t\t\treturn acc\n\t\t\t}, [])\n\t\t})\n\t}\n\n\tclubButton(parentClub, clubId, percentage=null){\n\t\treturn <li key={clubId}>\n\t\t\t<button\n\t\t\t\tclassName={\"clubButton\"}\n\t\t\t\tonClick={(e) => this.clubButtonClickHandler(clubId, parentClub)}\n\t\t\t>\n\t\t\t\t{clubId}\n\t\t\t</button> {percentage? \" - \" + (percentage*100).toFixed() + \"%\": \"\" }\n\t\t</li>\n\t}\n\n\tclubButtonClickHandler(clubId, parentClub){\n\t\tconst club = this.nodes.find(e => e.id === clubId)\n\t\t// we want to maintain the position of the parent club in selected club\n\t\tconst selectedClubs = this.state.selectedNodes[0] === parentClub?\n\t\t\t[parentClub, club] : [club, parentClub]\n\t\tthis.setState({selectedNodes: selectedClubs})\n\t}\n\n\tartistLink(artistName){\n\t\treturn artistLink(artistName, this.props.data.artist_names_to_ids)\n\t}\n\n\tshowSimilarities(){\n\t\tif (this.state.selectedNodes.length !== 2){\n\t\t\treturn ''\n\t\t}\n\n\t\tconst artists = this.state.selectedNodes.reduce((acc, e) => {\n\t\t\tacc.push(Object.keys(e.artists))\n\t\t\treturn acc\n\t\t}, [])\n\t\tconst union = artists[0].filter(e => artists[1].includes(e))\n\n\t\tif (union.length === 0){\n\t\t\treturn <div className={'similarities'}>\n\t\t\t\t<h4>No overlap in lineups - no common artists</h4>\n\t\t\t</div>\n\t\t}\n\n\t\tconst ids = this.state.selectedNodes.map(e => e.id)\n\t\tconst overlap = (this.props.data.links.find(e => {\n\t\t\treturn ids.includes(e.source) && ids.includes(e.target)\n\t\t}).weight * 100 ).toFixed(2)\n\n\t\treturn <div className={'similarities'}>\n\t\t\t<h4>\n\t\t\t\t{overlap}% overlap in lineups - {union.length} common artists:\n\t\t\t</h4>\n\t\t\t<ul>\n\t\t\t\t{union.map((e) => <li key={e}>{this.artistLink(e)}</li>)}\n\t\t\t</ul>\n\t\t</div>\n\t}\n\n\tcomponentDidUpdate( prevProps, prevState){\n\t\tconst filters = this.state.filters\n\t\tif (Object.keys(filters).length !== 0){\n\t\t\tthis.nodes = this.props.data.nodes.filter((e) => {\n\t\t\t\treturn Object.keys(filters).every((f) => {\n\t\t\t\t\treturn filters[f] === \"all\" || e[f] === filters[f]\n\t\t\t\t})\n\t\t\t})\n\t\t}else{\n\t\t\tthis.nodes = this.props.data.nodes\n\t\t}\n\t\tif (this.state.chartType){\n\t\t\tlet chartType\n\t\t\tif (this.state.chartType === \"Cluster\"){\n\t\t\t\tchartType = ClusterChart\n\t\t\t}\n\t\t\tif (this.state.chartType === \"CandleStick\"){\n\t\t\t\tchartType = CandleStickChart\n\t\t\t}\n\t\t\tif (this.state.chartType === \"BeeSwarm\"){\n\t\t\t\tchartType = BeeSwarmChart\n\t\t\t}\n\n\t\t\tif (chartType.name !== this.chartWrapper.chart.constructor.name){\n\t\t\t    this.chartWrapper.setChartType(this.nodes, chartType)\n\t\t\t}\n\t\t}\n\n\t\tif (this.state.draw){\n\t\t\tif (this.chartWrapper.chart.initial){\n\t\t\t\tthis.chartWrapper.chart.createGraph(this.nodes)\n\t\t\t}\n\t\t\tthis.chartWrapper.chart.drawGraph(\n\t\t\t\tthis.nodes,\n\t\t\t\tthis.onNodeClick,\n\t\t\t\tthis.state.selectedNodes\n\t\t\t)\n\t\t}\n\t}\n\n\tshowClubs(){\n\t\tconst clubs = this.state.selectedNodes\n\t\treturn <div className={\"clubInfo\"+clubs.length}>\n\t\t\t{clubs.map((e) => this.showClub(e))}\n\t\t\t{this.createClubTable()}\n\t\t</div>\n\t}\n\n\tshowClub(node){\n\t\tconst imgPath =`${process.env.PUBLIC_URL}/img/`\n\t\tconst img = node.logo === '' ? <div className={'placeholder'}/> : <div className={\"image center\"}>\n\t\t\t<img src={imgPath+node.logo.split(\"/\").slice(-1)[0]} alt={node.id} />\n\t\t</div>\n\t\tconst color = fillColor(node.group, this.categories)\n\t\tconst link = 'https://www.residentadvisor.net/club.aspx?id=' + node.club_id\n\n\t\treturn <div key={node.club_id} className={\"clubPanel\"}>\n\t\t\t<button\n\t\t\t\tclassName={\"clubButton\"}\n\t\t\t\tid={\"close\"}\n\t\t\t\tonClick={(e) => this.onNodeClick(node)}\n\t\t\t>\n\t\t\t\t <FontAwesomeIcon icon={faTimesCircle} />\n\t\t\t</button>\n\t\t\t<h3 style={{backgroundColor: color}} className={\"clubName\"}>\n\t\t\t\t<a rel={'noopener noreferrer'} target={'_blank'} href={link}>\n\t\t\t\t\t{node.id}\n\t\t\t\t</a>\n\t\t\t</h3>\n\t\t\t{img}\n\t\t\t<div className={\"center\"}>\n\t\t\t\t{node.region}\n\t\t\t\t{node.region === node.country ? \"\" : \" - \" + node.country}\n\t\t\t</div>\n\t\t</div>\n\t}\n\n\tcreateClubTable(){\n\t\tif (this.state.selectedNodes.length === 0){\n\t\t\treturn \"\"\n\t\t}\n\t\tconst rows = this.state.selectedNodes.map(club => {\n\t\t\treturn [\n\t\t\t\tclub.number_of_dates,\n\t\t\t\tclub.number_of_unique_artists,\n\t\t\t\tclub.total_number_of_artists,\n\t\t\t\tclub.followers,\n\t\t\t\t(club.attending / club.number_of_dates).toFixed(1),\n\t\t\t\t(club.total_number_of_artists / club.number_of_unique_artists).toFixed(1),\n\t\t\t\t(club.total_number_of_artists / club.number_of_dates).toFixed(2),\n\t\t\t]\n\t\t})\n\n\t\tconst headers = [\n\t\t\t\"Number of events\",\n            \"Unique artists\",\n            \"Total artists booked\",\n            \"Followers\",\n\t\t\t\"Average event attendance\",\n\t\t\t\"Average bookings per artist\",\n\t\t\t\"Average artists per date\",\n\t\t]\n\n\t\tlet tableRows = headers.map((e, i) => {\n\t\t\treturn <tr key={i}>\n\t\t\t\t<td key={e} >{e}</td>\n\t\t\t\t{rows.map((e, j) => <td key={i+\"-\"+j}>{e[i]}</td>)}\n\t\t\t</tr>\n\t\t}).concat(\n\t\t\tthis.createTable(\"Most Booked Artists\", this.mostCommonArtists())\n\t\t).concat(\n\t\t\tthis.createTable(\"Most Similar Clubs\", this.mostSimilarClubs())\n\t\t)\n\n\t\tconst header = rows.length !== 2? null : <thead>\n\t\t\t<tr>\n\t\t\t\t<th key={\"empty\"} />\n\t\t\t\t{this.state.selectedNodes.map(e=><th key={e.id}>{e.id}</th>)}\n\t\t\t</tr>\n\t\t</thead>\n\t\treturn <table>\n\t\t\t{header}\n\t\t\t<tbody>{tableRows}</tbody>\n\t\t</table>\n\t}\n\n\tshowGroup(){\n\t\tif (this.state.selectedNodes.length !== 1 ){\n\t\t\treturn \"\"\n\t\t}\n\t\tconst club = this.state.selectedNodes[0]\n\t\tconst groupClubs = this.props.data.nodes.filter(e => {\n\t\t\treturn club.group === e.group\n\t\t})\n\t\tif (groupClubs.length === 1){\n\t\t\treturn \"\"\n\t\t}\n\n\t\tconst stats = groupClubs.reduce((acc, e) => {\n\t\t\tacc[e.region] = (acc[e.region] + 1 || 1)\n\t\t\treturn acc\n\t\t}, {})\n\n\t\tconst color = fillColor(club.group, this.categories)\n\t\treturn <div style={{width: '50%'}}>\n\t\t\t<h3 >\n\t\t\t\tOther clubs in this cluster\n\t\t\t</h3>\n\t\t\t<BarChart\n\t\t\t\tdata={Object.entries(stats)}\n\t\t\t\twidth={312}\n\t\t\t\theight={210}\n\t\t\t\tcolor={color}\n\t\t\t/>\n\t\t\t<ul>\n\t\t\t\t{groupClubs.map(e => this.clubButton(club, e.id))}\n\t\t\t</ul>\n\t\t</div>\n\t}\n\n\tsetFilters =(e) => {\n\t\tconst filter = {}\n\t\tconst v = e.target.name === \"rank\" && e.target.value !== \"all\"?\n\t\t\tparseInt(e.target.value) : e.target.value\n\t\tfilter[e.target.name] = v\n\t\tthis.setState({\"filters\": filter, \"selectedNodes\": []})\n\t}\n\n\tupdateWindowDimensions = () => {\n\t\tconst w = document.documentElement.clientWidth\n\t\tconst h = document.documentElement.clientHeight\n\t\tthis.setState({\n\t\t\twidth: w, height: h, svgWidth: w, svgHeight: h - this.controlHeight\n\t\t})\n\t}\n\n\tshowClubInfo(){\n\t\tif (this.state.selectedNodes.length === 0){\n\t\t\treturn <div className={\"clubDetail hidden\"} />\n\t\t}\n\t\treturn <div className={\"clubDetail visible\"}>\n\t\t\t{this.showClubs()}\n\t\t\t{this.showGroup()}\n\t\t\t{this.showSimilarities()}\n\t\t</div>\n\t}\n\n    onStepEnter = ({element, data, direction}) => {\n\t    if (data){\n\t\t\tthis.setState(data)\n\t    }\n\t}\n\n\trender() {\n\t\treturn <div className=\"container\" id={\"start\"}>\n\t\t\t<div id={\"tooltip\"} />\n\t\t\t<ScrollyTelling\n\t\t\t\tenter={this.onStepEnter}\n\t\t\t\tnodes={this.props.data.nodes}\n\t\t\t\tlinks={this.props.data.links}\n\t\t\t/>\n\t\t\t<div className={\"graphic\"}>\n\t\t\t\t<svg\n\t\t\t\t\tref={this.ref}\n\t\t\t\t\twidth={this.state.svgWidth}\n\t\t\t\t\theight={this.state.svgHeight}\n\t\t\t\t/>\n\t\t\t\t{this.showClubInfo()}\n\t\t\t</div>\n        </div>\n\t}\n}\n\nexport default Container","import {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\"\nimport {faSyncAlt, faMobileAlt} from \"@fortawesome/free-solid-svg-icons\"\nimport React from \"react\"\nimport './rotate.scss';\n\n\nfunction Rotate(){\n\treturn <div className=\"rotate\">\n\t\t<div className={\"center\"}>\n\t\t\t<h2>\n\t\t\t\tPlease turn your phone to landscape mode to properly view\n\t\t\t\tthis webpage.\n\t\t\t</h2>\n\t\t\t<FontAwesomeIcon icon={faMobileAlt}/>\n\t\t\t<FontAwesomeIcon icon={faSyncAlt} spin={true}/>\n\t\t\t<h2>\n\t\t\t\tThanks!\n\t\t\t</h2>\n\t\t</div>\n\t</div>\n}\n\nexport default Rotate","import React, {Component} from 'react'\nimport './sections.scss';\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\"\nimport { faChevronDown } from '@fortawesome/free-solid-svg-icons'\nimport Rotate from \"./Rotate\"\n\nclass Intro extends Component {\n\trender(){\n\t\tconst content = <>\n\t\t\t<h1 className=\"center\">\n\t\t\t\tClubster Analysis\n\t\t\t</h1>\n\t\t\t<h3>\n\t\t\t\t Comparing the bookings at the worlds most popular nightclubs\n\t\t\t</h3>\n\t\t\t<p>\n\t\t\t\tHow similar or different are the line ups of the most popular nightclubs in the world?\n\t\t\t\tWhich clubs rely on residents and which have djs rotate through?\n\t\t\t\tHow different are the super clubs from the more underground fare?\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\tIn an attempt to answer these questions and others like them we looked\n\t\t\t\tat the most recommended clubs for the most popular regions on the\n\t\t\t\treputable website <a href=\"https://www.residentadvisor.net/events\">Resident Advisor (RA)</a>.\n\t\t\t\tWe gathered all their listings for 2019 and then compared\n\t\t\t\tthe clubs based on djs and artists that played there that year.\n\t\t\t\tTake a look to see how your favourite club fits in.\n\t\t\t</p>\n\t\t\t<h3>\n\t\t\t\tScroll down to get started!\n\t\t\t</h3>\n\t\t\t<div className={'scrollDown center'}>\n\t\t\t\t<a href=\"#start\">\n\t\t\t\t\t<FontAwesomeIcon icon={faChevronDown} />\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</>\n\t\treturn <Section content={content} intro={true}/>\n\t}\n}\n\nclass Outro extends Component {\n\trender (){\n\t\tconst content = <>\n\t\t\t<p>\n\t\t\t\tThat concludes this analysis of the bookings and line ups for\n\t\t\t\tthe most recommended clubs in the most popular regions on Resident\n\t\t\t\tAdvisor. I hope it has provided insight into how these clubs are\n\t\t\t\talike and different and given you a glimpse of how the world of\n\t\t\t\telectronic dance music worked in 2019.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\tThe data was retrieved in April to May 2020.\n\t\t\t\tIf you'd like to learn more you can view all the <a href=\"https://github.com/Kalli/clubster-analysis\">code</a> for\n\t\t\t\tretrieving and visualising this data. If you have any questions\n\t\t\t\tyou can reach me on <a href=\"https://twitter.com/karltryggvason\">twitter</a> or\n\t\t\t\tthrough <a href=\"mailto:ktryggvason@gmail.com\">email</a>.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\tA <a href=\"https://lazilyevaluated.co/\">Lazily Evaluated</a> production.\n\t\t\t\tBy <a href=\"https://karltryggvason.com/\">Karl Tryggvason</a> and <a href=\"https://soundcloud.com/moffandtarkin\">Magnús Felix Tryggvason</a>\n\t\t\t</p>\n\t\t</>\n\t\treturn <Section content={content} intro={false} />\n\t}\n}\n\nclass Section extends Component {\n\trender(){\n\t\tconst contentClass = \"sectionsContent \" + (\n\t\t\t!this.props.intro? \"bottom\" : \"\"\n\t\t)\n\t\treturn <div className={\"sections\"}>\n\t\t\t<div className={ this.props.intro? \"top\" : \"\"} />\n\t\t\t<Rotate />\n\t\t\t<div className={contentClass}>\n\t\t\t\t<div className=\"jumbotron\">\n\t\t\t\t\t{this.props.content}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t}\n}\n\nexport {Intro, Outro}","import React, {Component} from 'react'\nimport './navbar.scss'\n\n\nclass Navbar extends Component {\n\trender() {\n\t\treturn <nav className=\"navbar\" id={'nav'}>\n\t\t\t<h1 className=\"center\">\n\t\t\t\t<a href=\"http://lazilyevaluated.co/\">\n\t\t\t\tLazily Evaluated\n\t\t\t\t</a>\n\t\t\t</h1>\n\t\t</nav>\n\t}\n}\n\nexport default Navbar","import React, {Component} from 'react';\nimport Container from './Container'\nimport {Intro, Outro} from './Sections'\nimport Navbar from './navbar'\n\nclass App extends Component {\n\n\tconstructor(props) {\n        super(props)\n        this.state = {\n            loading: true,\n\t        data: {}\n        }\n    }\n\n    loadData() {\n        fetch(`${process.env.PUBLIC_URL}/network-2019.json`)\n            .then( (response) => {\n                return response.json()\n            })\n            .then( (data) => {\n            \t// change arrays into objects\n\t            data.nodes = data.nodes.map(e =>{\n\t            \treturn e.reduce((acc, e, i) => {\n\t            \t\tacc[data.node_keys[i]] = e\n\t            \t\treturn acc\n\t\t            }, {})\n\t            })\n\t            data.links = data.links.map(e =>{\n\t            \treturn e.reduce((acc, e, i) => {\n\t            \t\tacc[data.link_keys[i]] = e\n\t            \t\treturn acc\n\t\t            }, {})\n\t            })\n            \tthis.setState({\n\t\t            loading: false,\n\t\t            data: data,\n            \t})\n            });\n    }\n\n\tcomponentDidMount() {\n        this.setState({\n\t        loading: true,\n            data: this.loadData()\n        })\n    }\n\n    render(){\n\t    const container = this.state.loading? '' : <Container\n\t\t    data={this.state.data}\n\t    />\n        return (\n            <>\n\t            <Navbar />\n\t            {<Intro />}\n                {container}\n\t            {<Outro />}\n            </>\n        )\n    }\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}