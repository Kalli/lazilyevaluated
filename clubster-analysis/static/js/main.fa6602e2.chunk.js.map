{"version":3,"sources":["steps.md","lib.js","ScrollyTelling.js","utils/getDeviceType.js","charts/Chart.js","charts/BeeSwarmChart.js","charts/CandleStickChart.js","textHandling.js","charts/ClusterChart.js","charts/ChartWrapper.js","Controls.js","BarChart.js","clubPanel.js","Container.js","Rotate.js","Sections.js","navbar.js","App.js","index.js"],"names":["module","exports","fillColor","category","categories","interpolateWarm","indexOf","length","factorial","n","artistLink","artistName","artist_names_to_ids","artistId","toLowerCase","replace","href","rel","target","ScrollyTelling","props","stepsData","draw","filters","region","selectedNodes","chartType","country","state","steps","this","links","reduce","acc","e","weight","source","nodes","filter","includes","club_id","clubCount","averageWeight","combinations","Math","floor","averageResidency","number_of_unique_artists","total_number_of_artists","toFixed","data","fetch","then","response","text","html","marked","Object","keys","forEach","k","split","setState","stepHtml","className","dangerouslySetInnerHTML","__html","map","step","i","key","onStepEnter","enter","offset","Component","ua","navigator","userAgent","test","Chart","svg","margin","h","w","initial","width","left","right","height","top","bottom","legend","active","t","transition","duration","isMobile","getDeviceType","g","select","append","attr","node","selectAll","style","d","remove","BeeSwarmChart","y","group","x","drawGraph","clickHandler","filterNodes","calculateInitialPositions","id","exit","newNode","radius","merge","highlightSelected","stepBand","yScale","random","xScale","number_of_dates","groups","Set","scaleLinear","domain","max","range","scaleBand","createLegend","yOffset","translate","axis","axisBottom","tickValues","ticks","concat","call","labelOffset","CandleStickChart","candleStickData","groupBy","push","sort","a","b","ceil","min","count","exitPrevChart","on","click","tooltip","tooltipData","detail","event","pageX","pageY","Array","from","bw","bandwidth","each","agg","mean","drawBox","percentile_5","percentile_95","drawWhiskers","drawMean","addLabel","start","rows","club","join","CHAR_W","A","B","C","c","D","E","F","f","G","H","I","J","j","K","L","l","M","m","N","O","o","P","p","Q","q","R","r","S","s","T","U","u","V","v","W","X","Y","Z","z","fitTextToScreen","fittedText","ClusterChart","decay","timer","elapsed","dt","simulation","force","strength","pow","stop","cluster","zoom","zoomGroup","transform","stopPropagation","drag","dragstarted","dragged","dragended","calculateRadius","alphaTarget","restart","setTimeout","forceX","forceY","tick","groupCount","clusters","angle","PI","cos","sin","alpha","sqrt","initialize","_","fx","fy","forceSimulation","forceCenter","forceCollide","zoomLevel","zoomHandler","scaleExtent","touches","sizes","radiuses","followers","factor","log","ChartWrapper","ChartType","chart","newChart","Controls","showControls","searchSelect","selectedId","selectedClubs","find","selectNode","selectedRegion","selectedCountry","clubs","countries","name","value","regions","filterChange","icon","faTimesCircle","faCog","hide","mobile","onClick","size","options","selectedValue","changeHandler","onChange","disabled","placeholder","search","renderOption","domProps","option","snapshot","color","backgroundColor","selected","faCheck","BarChart","createGraph","ref","current","padding","tickFormat","tickSizeOuter","axisLeft","React","createRef","Club","imgPath","process","img","logo","src","slice","alt","link","onNodeClick","Table","header","ClubTable","attending","tableRows","entries","artists","onClubClick","ClubGroup","groupClubs","stats","window","outerWidth","childClub","Similarities","union","ids","overlap","Panel","Container","controlHeight","resizeFunctionId","index","splice","setFilters","onResize","didDimensionsChange","clearTimeout","updateWindowDimensions","document","documentElement","clientWidth","clientHeight","svgWidth","svgHeight","chartWrapper","dimensionChange","setChartType","getChartType","setAsyncState","newState","Promise","resolve","element","direction","clubButtonClickHandler","bind","removeEventListener","addEventListener","clubId","parentClub","prevProps","prevState","every","controls","Rotate","faMobileAlt","faSyncAlt","spin","Intro","content","faChevronDown","intro","Outro","Section","contentClass","Navbar","App","loading","json","node_keys","link_keys","loadData","container","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.fa6602e2.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/steps.973a96e0.md\";","import {interpolateWarm} from 'd3-scale-chromatic'\nimport React from \"react\"\n\nfunction fillColor(category, categories){\n\treturn interpolateWarm(\n\t\tcategories.indexOf(category) / categories.length\n\t)\n}\n\nconst factorial = (n) => !(n > 1) ? 1 : factorial(n - 1) * n;\n\n\nfunction artistLink(artistName, artist_names_to_ids){\n\tconst artistId = ( artist_names_to_ids[artistName] ||\n\t\t\tartistName.toLowerCase().replace(' ', '')\n\t)\n\treturn <a\n\t\thref={'https://www.residentadvisor.net/dj/' + artistId}\n\t\trel={'noopener noreferrer'}\n\t\ttarget={'_blank'}\n\t>\n\t\t{artistName}\n\t</a>\n}\n\nexport {fillColor, factorial, artistLink}\n","import React, {Component} from \"react\"\nimport {Scrollama, Step} from \"react-scrollama\"\nimport marked from \"marked\"\nimport steps from \"./steps.md\"\nimport \"./ScrollyTelling.scss\"\nimport {factorial} from \"./lib\"\n\n\nclass ScrollyTelling extends Component {\n\n\tstepsData = [\n\t\t{draw: true, filters: {region: \"all\"}, selectedNodes: []},\n\t\t{filters: {region: \"Berlin\"}, chartType: \"Cluster\", selectedNodes: []},\n\t\t{filters: {country: \"all\"}, chartType: \"Cluster\", selectedNodes: [] },\n\t\t{filters: {region: \"all\"}, chartType: \"BeeSwarm\", selectedNodes: []},\n\t\t{filters: {region: \"all\"}, chartType: \"BeeSwarm\", selectedNodes: []},\n\t\t{filters: {region: \"all\"}, chartType: \"CandleStick\", selectedNodes: []},\n\t]\n\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tsteps: null,\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\t// fetch the markdown and replace any variables\n\t\tconst {source, target, weight} = this.props.links.reduce((acc, e)=>{\n\t\t\treturn acc.weight > e.weight? acc : e\n\t\t}, {weight: 0})\n\n\t\t// Show De School and Berghain in step 3\n\t\tthis.stepsData[2].selectedNodes = this.props.nodes.filter((e) => {\n\t\t\treturn [112491, 5031].includes(e.club_id)\n\t\t})\n\t\tconst clubCount = this.props.nodes.length\n\t\tconst total = this.props.links.reduce((acc, e) => acc+e.weight, 0)\n\t\tconst averageWeight = total / this.props.links.length\n\t\tconst combinations = Math.floor(\n\t\t\tfactorial(clubCount) / (2 * factorial(clubCount - 2))\n\t\t)\n\n\t\tconst averageResidency = (this.props.nodes.reduce((acc, e) => {\n\t\t\tif (e.number_of_unique_artists !== 0){\n\t\t\t\treturn acc + e.total_number_of_artists / e.number_of_unique_artists\n\t\t\t}\n\t\t\treturn acc\n\t\t}, 0) / clubCount).toFixed(2)\n\n\t\tconst data = {\n\t\t\t\"$clubCount\": clubCount,\n\t\t\t\"$linkCount\": this.props.links.length,\n\t\t\t\"$source\": source,\n\t\t\t\"$target\": target,\n\t\t\t\"$weight\": (weight*100).toFixed(0),\n\t\t\t\"$combinations\": combinations,\n\t\t\t\"$averageWeight\": (averageWeight*100).toFixed(0.2),\n\t\t\t\"$averageResidency\": averageResidency,\n\t\t}\n\n\t\tfetch(steps)\n\t\t\t.then(response => {\n\t\t\t\treturn response.text()\n\t\t\t})\n\t\t\t.then(text => {\n\t\t\t\tlet html = marked(text)\n\t\t\t\tObject.keys(data).forEach(k => html = html.replace(k, data[k]))\n\t\t\t\tconst steps = html.split('<hr>')\n\t\t\t\tthis.setState({steps: steps})\n\t\t\t})\n\t}\n\n\tstep(stepHtml) {\n\t\treturn <div className={\"step \"}>\n\t\t\t<div dangerouslySetInnerHTML={{__html: stepHtml}} />\n\t\t</div>\n\t}\n\n\trender() {\n\n\t\tif (!this.state.steps){\n\t\t\treturn \"\"\n\t\t}\n\n\t\tconst steps = this.state.steps.map((step, i) => {\n\t\t\treturn <Step key={i} data={this.stepsData[i]}>\n\t\t\t\t{this.step(step)}\n\t\t\t</Step>\n\t\t})\n\t\treturn <div className={\"scroller\"}>\n\t\t\t<Scrollama\n\t\t\t\tonStepEnter={this.props.enter}\n\t\t\t\toffset={0.75}\n\t\t\t>\n\t\t\t\t{steps}\n\t\t\t</Scrollama>\n\t\t</div>\n\t}\n}\n\nexport default ScrollyTelling","export default () => {\n  const ua = navigator.userAgent;\n  if (/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(ua)) {\n    return \"tablet\";\n  }\n  if (\n    /Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(\n      ua\n    )\n  ) {\n    return \"mobile\";\n  }\n  return \"desktop\";\n};","import {select, selectAll} from 'd3-selection'\nimport {transition} from 'd3-transition'\nimport getDeviceType from \"../utils/getDeviceType\"\n\n// Common chart functionality\nclass Chart{\n\n\tconstructor(svg, margin, categories, h, w) {\n\t\tthis.svg = svg\n\t\tthis.initial = true\n\t\tthis.margin = margin\n\t\tthis.categories = categories\n\t\tthis.width = w - this.margin.left - this.margin.right\n\t    this.height = h - this.margin.top - this.margin.bottom\n\t\tthis.legend = null\n\t\tthis.active = true\n\t\tthis.t = transition().duration(1500)\n\t\tthis.isMobile = getDeviceType() !== 'desktop'\n\t}\n\n\tcreateGraph(nodes){\n\t\tif (!this.g) {\n\t\t\tthis.g = select(this.svg)\n\t\t\t\t.append(\"g\")\n\t\t\t\t.attr(\"class\", \"graph\")\n\t\t\tthis.node = this.g.selectAll(\"circle\")\n\t\t}\n\t}\n\n\thighlightSelected(selectedNodes){\n\t\t// highlight selected nodes if any\n\t\tthis.g\n\t\t\t.selectAll(\".nodes\")\n\t\t\t.style(\"opacity\", (d)=>{\n\t\t\t\treturn selectedNodes.includes(d)? 0.6 : 1\n\t\t\t})\n\t\tthis.g\n\t\t\t.selectAll(\".label\")\n\t\t\t.attr(\"text-decoration\", (d)=>{\n\t\t\t\treturn selectedNodes.includes(d)? \"underline\" : \"\"\n\t\t\t})\n\t}\n\n\texit(){\n\t\tthis.g.transition(1000).attr(\"transform\", \"translate(0, 0), scale(1)\")\n\t\tthis.active = false\n\t\tselectAll(\".legend\").transition(2500).style(\"opacity\", 0).remove()\n\t}\n}\n\nexport {Chart}","import {select} from 'd3-selection'\nimport {scaleLinear, scaleBand} from 'd3-scale'\nimport {max} from 'd3-array'\nimport {axisBottom} from 'd3-axis'\nimport './Chart.scss'\nimport {Chart} from \"./Chart\"\nimport {fillColor} from \"../lib\"\n\nclass BeeSwarmChart extends Chart{\n\n\n\tconstructor(svg, margin, categories, h, w) {\n\t\tsuper(svg, margin, categories, h, w)\n\t\tthis.groups = []\n\t\tthis.radius = this.isMobile ? 10 : 15\n\t}\n\n\ty = e => e.group\n\n\tx = e => {\n\t\treturn e.number_of_unique_artists !== 0?\n\t\t\te.total_number_of_artists / e.number_of_unique_artists : 0\n    }\n\n\tcreateGraph(nodes){\n\t\tsuper.createGraph(nodes)\n\n\t\t// filter out 0 attributes from nodes\n\t\tthis.filterNodes(nodes)\n\n\t\t// how many bands do we have on the y axis\n\t\tthis.groups = [...new Set(this.nodes.map(e => this.y(e)))]\n\n        this.xScale = scaleLinear()\n            .domain([1, max(this.nodes, d => this.x(d))])\n            .range([this.margin.left, this.width])\n\n        this.yScale = scaleBand()\n            .domain(this.groups)\n            .range([\n            \tthis.margin.top,\n\t            this.height + this.margin.top - this.margin.bottom\n            ])\n\t\tthis.createLegend()\n\t\t// resize all nodes\n\t\tthis.node.selectAll(\"circle\")\n\t\t\t.transition(this.t)\n\t\t\t.attr(\"r\", this.radius)\n\n\t\t// and hide labels\n\t\tthis.node.selectAll(\"text\")\n\t\t\t.transition(this.t)\n\t\t\t.style(\"opacity\", \"0\")\n\t\t\t.style(\"display\", \"none\")\n\t\t\t.text(d => d.id + \" - \" + this.x(d).toFixed(2))\n\t}\n\n\tdrawGraph = (nodes, clickHandler, selectedNodes) => {\n\n\t\tthis.filterNodes(nodes)\n\t\tif (this.initial){\n\t\t\tthis.calculateInitialPositions()\n\t\t}\n\n\t\tthis.node = this.node.data(this.nodes, d => d.id)\n\t\tthis.node.exit()\n\t\t\t.remove()\n\n\t\tlet newNode = this.node.enter()\n\t\t\t.append(\"g\")\n\n\t\tnewNode\n\t\t\t.append(\"circle\")\n\t\t\t.attr(\"r\", this.radius)\n\t\t\t.attr(\"fill\", d => fillColor(d.group, this.categories))\n\t\t\t.attr(\"class\", \"nodes\")\n\t\t\t.style(\"fill-opacity\", this.initial? 1: 0)\n\n\t\tnewNode\n\t\t\t.append(\"text\")\n\t\t\t.style(\"opacity\", \"0\")\n\t\t\t.style(\"display\", \"none\")\n\t\t\t.text(d => d.id + \" - \" + this.x(d).toFixed(2))\n\n\t\tthis.node = this.node.merge(newNode)\n\t    // if we are transitioning from another chart:\n\t\tif (this.initial){\n\t\t    this.node.transition(this.t)\n                .attr(\"transform\", d => \"translate(\"+d.x + \",\" + d.y+\")\")\n\t\t}\n\n\t\tthis.highlightSelected(selectedNodes)\n\t\tthis.initial = false\n\t}\n\n\tcalculateInitialPositions = () => {\n\t\t// Calculate positions\n\t\tconst stepBand = Math.floor(this.yScale.step()/this.radius)\n\t\tthis.nodes.forEach((e, i) => {\n\t\t\tconst offset = Math.floor(Math.random() * stepBand)\n\t        e.x  = this.xScale(this.x(e))\n            e.y = this.yScale(this.y(e)) + offset * this.radius\n\t\t})\n\t}\n\n\tfilterNodes = (nodes) => {\n\t\tconst minDates = 10\n\t\tconst minArtists = 20\n\t\tthis.nodes = nodes.filter(e =>{\n\t\t\treturn (\n\t\t\t\tthis.x(e) !== 0 &&\n\t\t\t\te.number_of_unique_artists > minArtists &&\n\t\t\t\te.number_of_dates > minDates\n\t\t\t)\n\t\t})\n\t}\n\n\tcreateLegend(){\n\t\tconst yOffset = this.height + this.margin.top - this.margin.bottom\n\t\tconst translate = `translate(0, ${yOffset})`\n\t\tthis.legend = select(this.svg)\n\t\t\t.append(\"g\")\n\t\t\t.attr(\"class\", \"legend\")\n\t\t\t.attr(\"transform\", translate)\n\t\tconst axis = axisBottom(this.xScale)\n\t\t\t.tickValues(this.xScale.ticks().concat(this.xScale.domain()))\n\t\tthis.legend.call(axis)\n\n\t\tconst labelOffset = `translate(${this.width}, 30)`\n\t\tselect(this.svg)\n\t\t\t.append(\"g\")\n\t\t\t.attr(\"transform\", labelOffset)\n\t\t\t.attr(\"class\", \"label legend\")\n\t\t\t.attr(\"text-anchor\", \"end\")\n\t\t\t.append('text')\n\t\t    .text(\"Average number of bookings per artist by club in 2019\");\n\t}\n}\n\nexport {BeeSwarmChart}","import {select, event} from 'd3-selection'\nimport {scaleLinear, scaleBand} from 'd3-scale'\nimport {max} from 'd3-array'\nimport {axisBottom} from 'd3-axis'\nimport './Chart.scss'\nimport {Chart} from \"./Chart\"\n\n\nclass CandleStickChart extends Chart{\n\n\tconstructor(svg, margin, categories, h, w) {\n\t\tsuper(svg, margin, categories, h, w)\n\t\tthis.groups = []\n\t\tthis.tooltipData = null\n\t}\n\n\ty = e => {\n\t\treturn this.groups.indexOf(e)\n\t}\n\n\tx = e => {\n\t\treturn e.number_of_unique_artists !== 0?\n\t\t\te.total_number_of_artists / e.number_of_unique_artists : 0\n    }\n\n    candleStickData = () => {\n\t\tconst groups = this.nodes.reduce((acc, e) => {\n\t\t\tconst key = e[this.groupBy]\n\t\t\tacc[key] ? acc[key].push(e) : acc[key] = [e]\n\t\t\treturn acc\n\t\t}, {})\n\t    return Object.keys(groups).reduce((acc, key) => {\n\t    \tconst nodes = groups[key].sort((a, b) => this.x(b) - this.x(a))\n\t\t    const d = nodes.map(e => this.x(e)).sort()\n\t\t    acc.push({\n\t\t\t    'percentile_95': d[Math.floor(0.95*d.length)-1],\n\t\t\t    'percentile_5': d[Math.ceil(0.05*d.length)],\n\t\t\t\t'mean': d.reduce((acc, e) => acc + e, 0) / d.length,\n\t\t\t    'max': Math.max(...d),\n\t\t\t    'min': Math.min(...d),\n\t\t\t    'count': d.length,\n\t\t\t    'id': key,\n\t\t\t    'nodes': nodes\n\t\t    })\n\t    \treturn acc\n\t    }, []).filter((e) => e.count > 1)\n\t}\n\n\tcreateGraph(nodes){\n\t\tsuper.createGraph(nodes)\n\t\tthis.groupBy = 'region'\n\n\t\t// filter out 0 attributes from nodes\n\t\tthis.filterNodes(nodes)\n\t\tthis.data = this.candleStickData()\n\t\t// how many bands do we have on the y axis\n\t\tthis.groups = [...new Set(this.data.map(e => e.id))]\n\n        this.xScale = scaleLinear()\n            .domain([1, max(this.nodes, d => this.x(d))])\n            .range([this.margin.left, this.width])\n\n        this.yScale = scaleBand()\n            .domain(Array.from(Array(this.groups.length).keys()))\n            .range([\n            \tthis.margin.top,\n\t            this.height + this.margin.top - this.margin.bottom\n            ])\n\t\tthis.createLegend()\n\t\tthis.bw = this.yScale.bandwidth();\n\t}\n\n\texitPrevChart(){\n\t\tlet n = 0\n\t\tthis.node.exit()\n\t\t\t.each(() => n++)\n\t\t\t.attr(\"class\", \"candlestick\")\n\t\t\t.transition(\"exit\").duration(2000)\n            .attr(\"transform\", d => {\n            \tconst agg = this.data.filter(e => e.id === d[this.groupBy])[0]\n\t            const x = agg? this.xScale(agg.mean) : 0\n            \tconst y = this.yScale(this.y(d.region)) + this.bw / 2\n\t            if (x === 0){\n\t            \treturn \"scale(0, 0)\"\n\t            }\n            \treturn \"translate(\"+ x + \",\" + (y? y : 0) +\")\"\n            })\n\t\t\t.on('end', () => {\n\t\t\t\tn--\n\t\t\t\tif (n === 0){\n\t\t\t\t\tthis.drawBox()\n\t\t\t\t}\n\t\t\t})\n\t\t\t.transition().duration(2000)\n\t\t\t.remove()\n\t}\n\n\tdrawBox(){\n\t\tlet n = 0\n\n\t\tthis.newNode\n\t\t\t.each(() => n++)\n\t\t\t.append(\"rect\")\n\t\t\t.attr(\"height\", 0)\n\t\t\t.attr(\"width\", 0)\n\t        .attr(\"class\", \"fill\")\n\t\t\t.attr(\"x\", d => this.xScale(d.mean))\n\t\t\t.attr(\"rx\", 15)\n\t\t\t.attr(\"y\", d => this.yScale(this.y(d.id)) + this.bw / 2)\n\t\t\t.attr(\"ry\", 15)\n\t\t\t.transition(\"drawbox\").duration(1000)\n\t\t\t.attr(\"height\", this.bw)\n\t\t\t\t.attr(\"x\", d => this.xScale(d.percentile_5))\n\t\t\t\t.attr(\"y\", d => this.yScale(this.y(d.id)))\n\t\t\t\t.attr('width', d => {\n\t\t\t\t\tconst start = this.xScale(d.percentile_95)\n\t\t\t\t\tconst end = this.xScale(d.percentile_5)\n\t\t\t\t\treturn start - end\n\t\t\t\t})\n\t\t\t\t.on(\"end\", () => {\n\t\t\t\t\tn--\n\t\t\t\t\tif (n === 0){\n\t\t\t\t\t\tthis.drawWhiskers()\n\t\t\t\t\t\tthis.drawMean()\n\t\t\t\t\t\tthis.addLabel()\n\t\t\t\t\t}\n\t\t\t\t})\n\t}\n\n\tdrawWhiskers(){\n\t\tconst offset = this.bw / 2\n\t\tthis.newNode\n\t\t\t.append(\"line\")\n\t\t\t.attr(\"x1\", d => this.xScale(d.percentile_5))\n\t\t\t.attr(\"x2\", d => this.xScale(d.percentile_5))\n\t\t\t.attr(\"y1\", d => this.yScale(this.y(d.id)) + offset)\n\t\t\t.attr(\"y2\", d => this.yScale(this.y(d.id)) + offset)\n\t        .attr(\"class\", \"line\")\n\t\t\t.transition(\"drawWhiskers1\").duration(1000)\n\t\t\t\t.attr(\"x2\", d => this.xScale(d.min))\n\n\t\tthis.newNode\n\t\t\t.append(\"line\")\n\t\t\t.attr(\"x1\", d => this.xScale(d.percentile_95))\n\t\t\t.attr(\"x2\", d => this.xScale(d.percentile_95))\n\t\t\t.attr(\"y1\", d => this.yScale(this.y(d.id)) + offset)\n\t\t\t.attr(\"y2\", d => this.yScale(this.y(d.id)) + offset)\n\t        .attr(\"class\", \"line\")\n\t\t\t.transition(\"drawWhiskers2\").duration(1000)\n\t\t\t\t.attr(\"x2\", d => this.xScale(d.max))\n\n\t}\n\n\taddLabel(){\n\t\t// text\n\t\tthis.newNode\n\t\t\t.append(\"text\")\n\t\t\t.attr(\"x\", d => {\n\t\t\t\tconst start = this.xScale(d.percentile_5)\n\t\t\t\tconst length = this.xScale(d.percentile_95) - start\n\t\t\t\treturn start + (length / 2)\n\t\t\t})\n\t\t\t.attr(\"y\", d => this.yScale(this.y(d.id)) + this.bw/2)\n\t\t\t.attr(\"text-anchor\", \"middle\")\n\t\t\t.attr(\"class\", \"label\")\n\t\t\t.style(\"fill\", \"#fff\")\n            .style(\"font-size\", 12)\n            .text(d => `${d.id} (${d.count})`)\n\t}\n\n\tdrawMean(){\n\t\t// mean\n\t\tthis.newNode\n\t\t\t.append(\"line\")\n\t\t\t.attr(\"x1\", d => this.xScale(d.mean))\n\t\t\t.attr(\"x2\", d => this.xScale(d.mean))\n\t\t\t.attr(\"y1\", d => this.yScale(this.y(d.id)))\n\t\t\t.attr(\"y2\", d => this.yScale(this.y(d.id)) + this.bw)\n\t        .attr(\"class\", \"mean\")\n\t}\n\n\tdrawGraph = (nodes, clickHandler, selectedNodes) => {\n\t\tthis.filterNodes(nodes)\n\n\t\tthis.node = this.node.data(this.data, d=> d.id)\n\n\t\tthis.newNode = this.node.enter()\n\t\t\t.append(\"g\")\n\t\t\t.attr(\"class\", \"candlestick\")\n\n\t\tthis.exitPrevChart()\n\n\t\tthis.newNode.on(\"click\", d => this.click(d))\n\t\tthis.tooltip = select(\"#tooltip\")\n\n\t\tthis.node = this.node.merge(this.newNode)\n\t\tthis.initial = false\n\t}\n\n\tclick = (d) => {\n\t\tif(this.tooltipData !== d){\n\t\t    this.tooltip.transition().duration(200).style(\"opacity\", 1)\n\t\t\tthis.tooltip.html(this.detail(d))\n\t\t         .style(\"left\", (event.pageX) + \"px\")\n\t\t         .style(\"top\", (event.pageY - 28) + \"px\")\n\t\t\tthis.tooltipData = d\n\t\t}else{\n\t\t    this.tooltip.transition().duration(500).style(\"opacity\", 0)\n\t\t\tthis.tooltipData = null\n\t\t}\n\t}\n\n\tfilterNodes = (nodes) => {\n\t\tconst minDates = 10\n\t\tconst minArtists = 20\n\t\tthis.nodes = nodes.filter(e =>{\n\t\t\treturn (\n\t\t\t\tthis.x(e) !== 0 &&\n\t\t\t\te.number_of_unique_artists > minArtists &&\n\t\t\t\te.number_of_dates > minDates\n\t\t\t)\n\t\t})\n\t}\n\n\tcreateLegend(){\n\t\tconst yOffset = this.height + this.margin.top - this.margin.bottom\n\t\tconst translate = `translate(0, ${yOffset})`\n\t\tthis.legend = select(this.svg)\n\t\t\t.append(\"g\")\n\t\t\t.attr(\"class\", \"legend\")\n\t\t\t.attr(\"transform\", translate)\n\t\tconst axis = axisBottom(this.xScale)\n\t\t\t.tickValues(this.xScale.ticks().concat(this.xScale.domain()))\n\t\tthis.legend.call(axis)\n\n\t\tconst labelOffset = `translate(${this.width}, 30)`\n\t\tselect(this.svg)\n\t\t\t.append(\"g\")\n\t\t\t.attr(\"transform\", labelOffset)\n\t\t\t.attr(\"class\", \"label legend\")\n\t\t\t.attr(\"text-anchor\", \"end\")\n\t\t\t.append('text')\n\t\t    .text(\"Average number of bookings per artist by region in 2019\")\n\t}\n\n\tdetail(data){\n\t\tconst rows = data.nodes.map(club => {\n\t\t\treturn `<tr>\n\t\t\t\t<td>${club.id}</td>\n\t\t\t\t<td>\n\t\t\t\t\t${(\n\t\t\t\t\t\tclub.total_number_of_artists / club.number_of_unique_artists\n\t\t\t\t\t).toFixed(1)}\n\t\t\t\t</td>\n\t\t\t</tr>`\n\t\t})\n\t\treturn `<h2 class=\"center\">${data.id}</h2>\n\t\t\t<table>\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th>Club Name</th>\n\t\t\t\t\t<th>Average bookings per artist</th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t${rows.join(\"\")}\n\t\t\t</tbody>\n\t\t</table>`\n\t}\n}\n\nexport {CandleStickChart}","// taken from: https://observablehq.com/@gka/cheap-fit-text-to-circle\nconst CHAR_W = {\n\tA:7,a:7,B:8,b:7,C:8,c:6,D:9,d:7,E:7,e:7,F:7,f:4,G:9,g:7,H:9,h:7,I:3,i:3,\n\tJ:5,j:3,K:8,k:6,L:7,l:3,M:11,m:11,N:9,n:7,O:9,o:7,P:8,p:7,Q:9,q:7,R:8,\n\tr:4,S:8,s:6,T:7,t:4,U:9,u:7,V:7,v:6,W:11,w:9,X:7,x:6,Y:7,y:6,Z:7,z:5,\n\t'.':2,',':2,':':2,';':2\n}\n\nfunction fitTextToScreen(text, radius){\n\tconst fittedText = text.split(\"\").reduce((acc, e) => {\n\t\tif (acc.length < 1.6 * radius){\n\t\t\tacc.length = acc.length + (CHAR_W[e] || CHAR_W.a)\n\t\t\tacc.text = acc.text + e\n\t\t}\n\t\treturn acc\n\t}, {length: 0, text: ''}).text\n\tif (fittedText === text){\n\t\treturn text\n\t}\n\treturn fittedText + \"...\"\n}\n\nexport {fitTextToScreen}","import {forceSimulation, forceCenter, forceX, forceY} from \"d3-force\"\nimport {forceCollide} from \"d3-force\"\nimport {select, event} from 'd3-selection'\nimport {drag} from 'd3-drag'\nimport {zoom} from \"d3-zoom\"\nimport {timer} from \"d3-timer\"\nimport {fitTextToScreen} from \"../textHandling\"\nimport {fillColor} from \"../lib\"\nimport './Chart.scss'\nimport {Chart} from \"./Chart\"\n\nclass ClusterChart extends Chart{\n\n\tconstructor(svg, margin, categories, h, w) {\n\t\tsuper(svg, margin, categories, h, w)\n\t\tthis.clusters = {}\n\t\t// center co-ordinates for clusters\n\t\t// offset mobile to the left, so the scrolly telling overlaps it less\n\t\tthis.x = this.width / 2 + (this.isMobile? 400 : 0)\n\t\tthis.y = this.height / 2 + (this.isMobile? 100 : 0)\n\t}\n\n\tcreateGraph(nodes){\n\t\tsuper.createGraph(nodes)\n\t\tconst padding = 1\n\n\t\tthis.simulation = forceSimulation()\n\t\t\t.force('center', forceCenter(this.x, this.y))\n\t\t\t.force('x', forceX(this.x).strength(0.01))\n\t\t\t.force('y', forceY(this.y).strength(0.01))\n\t\t\t.force('cluster', this.cluster().strength(0.5))\n\t\t\t.force('collide', forceCollide(d => d.radius + padding))\n\n\t\tconst zoomLevel = this.isMobile? 0.6 : 1\n\t\tthis.zoomHandler = zoom()\n\t\t\t.scaleExtent([zoomLevel, zoomLevel])\n\t\t\t.filter(() => {\n\t\t\t\tif (this.isMobile ){\n\t\t\t\t\t// pan with two fingers on mobile\n\t\t\t\t\treturn event.touches && event.touches.length > 1\n\t\t\t\t}\n\t\t\t\treturn true\n\t\t\t})\n\t\t\t.on(\"zoom\", () => this.zoom(this.g))\n\t\tselect(this.svg).call(this.zoomHandler)\n\n\t\tthis.decay()\n\t\tthis.createLegend()\n\t\t// resize all nodes if we were coming from a different graph\n\t\tthis.node.selectAll(\"circle\")\n\t\t\t.transition(this.t)\n\t\t\t.attr(\"r\", d => this.calculateRadius(d))\n\n\t\t// and show labels\n\t\tthis.node.selectAll(\"text\")\n\t\t\t.transition(this.t)\n\t\t\t.style(\"opacity\", \"1\")\n\t\t\t.style(\"display\", \"block\")\n\t\t\t.text(d => fitTextToScreen(d.id, d.radius))\n\t}\n\n\tdecay = () => {\n\t\tconst transitionTime = 3000\n\t\tconst t = timer((elapsed) => {\n\t        var dt = elapsed / transitionTime\n\t\t    this.simulation\n\t\t\t    .force('collide')\n\t\t\t    .strength(Math.pow(dt, 2))\n\t\t    if (dt >= 1.0){\n\t\t        t.stop()\n\t\t\t    // disable forces for less jitter\n\t\t\t    this.simulation.force(\"x\", null)\n\t\t\t    this.simulation.force(\"y\", null)\n\t\t\t    this.simulation.force(\"center\", null)\n                this.simulation.force('cluster', this.cluster().strength(0.1))\n\t\t    }\n\t\t})\n\t}\n\n\tzoom = (zoomGroup) => {\n\t\tif (!this.active) return\n\t\tzoomGroup.attr(\"transform\", event.transform)\n\t}\n\n\tdrawGraph = (nodes, clickHandler, selectedNodes) => {\n\t\t// prevent nodes from jumping on filter operations\n\t\tif (!this.initial){\n\t\t\tthis.simulation.stop()\n\t\t}\n\t\t// todo this mutates and is ugly\n\t\tif (this.initial){\n\t\t\tthis.calculateInitialPositions(nodes)\n\t\t}\n\n\t\tlet exit = 0\n\t\tthis.node = this.node.data(nodes, d=> d.id)\n\t\tthis.node.exit()\n\t\t\t.each(() => exit++)\n\t\t\t.transition().duration(2000)\n\t\t\t.style(\"opacity\", 0)\n\t\t\t.remove()\n\n\t\tlet enter = 0\n\t\tlet newNode = this.node.enter()\n\t\t\t.each(() => enter++)\n\t\t\t.append(\"g\")\n\t\t\t.on(\"click\", d => {\n\t\t\t\tevent.stopPropagation()\n\t\t\t\tclickHandler(d)\n\t\t\t})\n\t\t\t.call(drag()\n\t\t\t\t.on(\"start\", d => this.dragstarted(d, this.simulation))\n\t\t\t\t.on(\"drag\", d => this.dragged(d))\n\t\t\t\t.on(\"end\", d => this.dragended(d, this.simulation))\n\t\t\t)\n\n\t\tnewNode\n\t\t\t.append(\"circle\")\n\t\t\t.attr(\"r\", d => this.calculateRadius(d))\n\t\t\t.attr(\"fill\", d => fillColor(d.group, this.categories))\n\t\t\t.attr(\"class\", \"nodes\")\n\t\t\t.style(\"fill-opacity\", this.initial? 1: 0)\n\t\t\t.transition().duration(2000).style(\"fill-opacity\", 1)\n\n\t\tnewNode\n\t\t\t.append(\"text\")\n\t\t\t.attr(\"text-anchor\", \"middle\")\n\t\t\t.attr(\"class\", \"label\")\n\t\t\t.style(\"fill\", \"#fff\")\n\t\t\t.style(\"cursor\", \"pointer\")\n\t\t\t.style(\"opacity\", 0)\n            .style(\"font-size\", 12)\n\t\t\t.text(d => fitTextToScreen(d.id, d.radius))\n\t\t\t.transition().duration(2000).style(\"opacity\", 1)\n\n\t\tthis.node = this.node.merge(newNode)\n\t\tif (!this.initial){\n\t\t\t// restart simulation so nodes wont get stuck on next filter\n\t\t\tthis.simulation.alphaTarget(0.3).restart()\n\t\t\tsetTimeout( () => {\n\t\t\t\tif (enter > 0 || exit > 0){\n\t\t\t\t\t// if the nodes changed pull them slightly to center\n\t\t\t\t\t// to ensure as many as possible are visible\n\t\t\t\t\tthis.simulation.force('x', forceX(this.x).strength(0.02))\n\t\t\t\t\tthis.simulation.force('x', forceY(this.y).strength(0.02))\n\t\t\t\t}\n\t\t\t\tthis.simulation.alphaTarget(0)\n\t\t\t}, 250)\n\t\t\tthis.decay()\n\t\t}\n\t\tthis.highlightSelected(selectedNodes)\n\n\t\tthis.simulation\n\t\t\t.on('tick', this.tick)\n\t\t\t.nodes(nodes)\n\t\tthis.initial = false\n\t\tif (this.isMobile){\n\t\t\tthis.g.attr(\"transform\", \"scale(.60, .60)\")\n\t\t}\n\t}\n\n\tcalculateInitialPositions = (nodes) => {\n\t\tconst radius = Math.min(this.width, this.height) / 2\n\t\tconst groupCount = Math.max(...nodes.map(e => e.group))\n\t\tthis.clusters = new Array(groupCount)\n\t\tnodes.forEach((e) => {\n\t\t\t// position along a circle, clustered by group\n\t\t\tconst g = e.group\n\t\t\tconst angle = g / groupCount * 2 * Math.PI\n\t        e.x  = Math.cos(angle) * radius + this.width / 2 + Math.random()\n            e.y = Math.sin(angle) * radius + this.height / 2 + Math.random()\n\n\t\t\t// set the radius of each node\n\t\t\tconst r = this.calculateRadius(e)\n\t\t\te.radius = r\n\n\t\t\tif (!this.clusters[g] || r > this.clusters[g]){\n\t\t\t\tthis.clusters[e.group] = e\n\t\t\t}\n\t\t})\n\t}\n\n\ttick = () => {\n\t\tthis.node\n\t\t\t.attr(\"transform\", d => \"translate(\"+d.x + \",\" + d.y+\")\")\n\t}\n\n\tcluster = () => {\n\t\t// adapted from\n\t\t// https://bl.ocks.org/ericsoco/38b4f8b51ecf116e6fb0727d25687e8e\n\t\tlet nodes,\n\t\t\tstrength = 0.1\n\n\t\tconst force = (alpha) => {\n\t\t\t// scale + curve alpha value\n\t\t\talpha *= strength * alpha\n\n\t\t\tnodes.forEach((d) => {\n\t\t\t\tlet cluster = this.clusters[d.group]\n\t\t\t\tif (cluster === d) return\n\t\t\t\tlet x = d.x - cluster.x,\n\t\t\t\t\ty = d.y - cluster.y,\n\t\t\t\t\tl = Math.sqrt(x * x + y * y),\n\t\t\t\t\tr = d.radius + cluster.radius\n\n\t\t\t\tif (l !== r) {\n\t\t\t\t\tl = (l - r) / l * alpha\n\t\t\t\t\td.x -= x *= l\n\t\t\t\t\td.y -= y *= l\n\t\t\t\t\tcluster.x += x\n\t\t\t\t\tcluster.y += y\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\tforce.initialize = function (_) {\n\t\t\tnodes = _\n\t\t}\n\n\t\tforce.strength = _ => {\n\t\t\tstrength = _ == null ? strength : _\n\t\t\treturn force\n\t\t}\n\n\t\treturn force\n\t}\n\n\tdragstarted = (d, simulation) => {\n\t\tif (!this.active) return\n\t\tif (!event.active) simulation.alphaTarget(0.3).restart()\n\t\td.fx = d.x\n\t\td.fy = d.y\n\t}\n\n\tdragged = d => {\n\t\tif (!this.active) return\n\t\td.fx = event.x\n\t\td.fy = event.y\n\t}\n\n\tdragended = (d, simulation) => {\n\t\tif (!this.active) return\n\t\tif (!event.active) simulation.alphaTarget(0)\n\t\td.fx = null\n\t\td.fy = null\n\t}\n\n\tcreateLegend(){\n\t\tconst sizes = [10000, 1000, 100, 10]\n\t\tconst radiuses = sizes.map(e => {\n\t\t\treturn this.calculateRadius({followers: e})\n\t\t})\n\n\t\tconst x = 20\n\t\tconst lineHeight = 30\n\t\tconst y = this.height - 1.5 * Math.max(...radiuses)\n\n\t\tconst translate = `translate(${x}, ${y})` + (\n\t\t\t!this.isMobile? \"\":\" scale(.60, .60)\"\n\t\t)\n\n\t    this.legend = select(this.svg)\n\t        .append(\"g\")\n\t\t\t.attr(\"class\", \"legend\")\n\t        .attr(\"x\", x)\n\t        .attr(\"y\", y)\n\t        .attr(\"transform\", translate)\n\t        .style(\"text-align\", \"center\")\n\n\t\tconst max = Math.max(...radiuses)\n\t\t// add nodes\n\t\tthis.legend.selectAll(\"rects\")\n\t\t.data(radiuses)\n\t\t.enter()\n\t\t.append(\"circle\")\n\t\t    .attr(\"cx\", max)\n\t\t    .attr(\"cy\", d => 2 * max - (d) + 0.5*lineHeight)\n\t\t    .attr(\"r\", d => d)\n\t\t\t.attr(\"fill\", \"white\")\n\t\t\t.attr(\"stroke\", \"black\")\n\t\t\t.attr(\"alignment-baseline\", \"middle\")\n\n\t\tthis.legend.selectAll(\"rects\")\n\t\t.data(radiuses)\n\t\t.enter()\n\t\t.append(\"text\")\n\t\t    .attr(\"x\", max)\n\t\t    .attr(\"y\", (d, i) => {\n\t\t        // this is messy, but the best looking option I could find\n\t\t\t    // smallest circle is labelled in center, others at the top\n\t\t        if (i === 0){\n\t\t            return 2 * max - 1.4 * d\n\t\t\t    }\n\t\t        if (i === 1){\n\t\t            return 2 * max - 1.2 * d\n\t\t\t    }\n\t\t        return 2 * max - (d) + 0.5*lineHeight\n\t\t    })\n\t\t\t.text((d, i) => sizes[i])\n\t\t\t.attr(\"text-anchor\", \"middle\")\n\n\t\tthis.legend\n\t\t\t.append('text')\n\t\t\t.text(\"RA Club Followers\")\n\t\t\t.attr(\"text-anchor\", \"middle\")\n\t\t\t.attr(\"x\", max)\n\t\t\t.attr(\"y\", 2 * max + lineHeight)\n\t}\n\n\texit(){\n\t\tsuper.exit()\n\t\tthis.simulation.stop()\n\t}\n\n\tcalculateRadius(e){\n\t\t// scale node radius according to svg size\n\t\tconst factor = this.isMobile? 500 : 800\n\t\tconst m = Math.min(this.width, this.height) / factor\n\t\treturn 12 * Math.log(Math.sqrt(e.followers)) * m\n\t}\n\n}\n\nexport {ClusterChart}","// wrapper around chart classes that allows us to switch between them\n// for transition purposes\n\nclass ChartWrapper{\n\n\tconstructor(svg, margin, categories, h, w, ChartType) {\n\t\tthis.svg = svg\n\t\tthis.initial = true\n\t\tthis.margin = margin\n\t\tthis.categories = categories\n\t\tthis.h = h\n\t\tthis.w = w\n\t\tthis.chart = new ChartType(svg, margin, categories, h, w)\n\t}\n\n\tdimensionChange(h, w){\n\t\tthis.h = h\n\t\tthis.w = w\n\t\tthis.initial = true\n\t}\n\n    setChartType(nodes, ChartType){\n\t    this.chart.exit()\n        const newChart = new ChartType(\n            this.svg, this.margin, this.categories, this.h, this.w\n        )\n        newChart.g = this.chart.g\n        newChart.node = this.chart.node\n\t    newChart.initial = true\n        this.chart = newChart\n    }\n\n}\n\nexport {ChartWrapper}","import React, {Component} from 'react'\nimport './container.scss'\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\"\nimport {faCheck, faTimesCircle, faCog} from '@fortawesome/free-solid-svg-icons'\nimport SelectSearch from 'react-select-search';\nimport {fillColor} from \"./lib\"\nimport './controls.scss'\n\n\nclass Controls extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {showControls: false}\n\t}\n\n\trender(){\n\t\tconst nodes = this.props.nodes\n\t\tconst filters = this.props.filters\n\t\tconst selectedRegion = filters.region? filters.region : \"all\"\n\t\tconst selectedCountry = filters.country? filters.country : \"all\"\n\n\t\tconst clubs = nodes.filter((e) => {\n\t\t\tif (selectedRegion !== \"all\") {\n\t\t\t\treturn e.region === selectedRegion\n\t\t\t}\n\t\t\tif (selectedCountry !== \"all\"){\n\t\t\t\treturn e.country === selectedCountry\n\t\t\t}\n\t\t\treturn true\n\t\t}).map((e) => {\n\t\t\treturn {\n\t\t\t\t\"name\": e.id,\n\t\t\t\t\"value\": e.id,\n\t\t\t\t\"color\": fillColor(e.group, this.props.categories || [])\n\t\t\t}\n\t\t})\n\n\t\tconst countries = [{name: \"All Countries\", value: \"all\"}].concat(\n\t\t\t[...new Set(nodes.map(e => e.country))]\n\t\t\t.sort()\n\t\t\t.map(c => ({\"name\": c, \"value\": c}))\n\t\t)\n\n\t\tconst regions = [{name: \"All Regions\", value: \"all\"}].concat(\n\t\t\t[...new Set(nodes.map(e => e.region))]\n\t\t\t.sort()\n\t\t\t.map(c => ({\"name\": c, \"value\": c}))\n\t\t)\n\n\t\tconst country = this.select(\n\t\t\tcountries, selectedCountry, \"country\", this.props.filterChange\n\t\t)\n\n\t\tconst region = this.select(\n\t\t\tregions, selectedRegion, \"region\", this.props.filterChange\n\t\t)\n\n\t\tconst selectedClubs = this.props.selectedNodes.map(e => e.id)\n\t\tconst club = this.select(\n\t\t\tclubs, selectedClubs, \"club\", this.searchSelect\n\t\t)\n\n\t\tconst icon = this.state.showControls? faTimesCircle : faCog\n\t\tconst hide = this.props.isMobile && !this.state.showControls\n\n\t\tconst mobile = !this.props.isMobile ? \"\" : <div className={\"mobile-controls\"}>\n\t\t\t<button onClick={this.showControls}>\n                <FontAwesomeIcon size=\"2x\" icon={icon} />\n            </button>\n\t\t</div>\n\n\t\treturn <div className={\"controls \" + (hide? \"hidden \" : \"\")}>\n\t\t\t{country}\n\t\t\t{region}\n\t\t\t{club}\n\t\t\t{mobile}\n\t\t</div>\n\t}\n\n    showControls = () => {\n        this.setState({showControls: !this.state.showControls})\n    }\n\n\tselect(options, selectedValue, name, changeHandler){\n\t\t// return native selects for mobile\n\t\tif (this.props.isMobile){\n\t\t\treturn (<div className=\"select-wrapper\">\n\t\t\t\t\t<select\n\t\t\t\t\tname={name}\n\t\t\t\t\tonChange={(e) => changeHandler(name, e.target.value)}\n\t\t\t\t\tvalue={selectedValue}\n\t\t\t\t>\n\t\t\t\t\t<option value=\"\" disabled>Select a {name}</option>\n\t\t\t\t\t{options.map(e => <option key={e.name} value={e.value}>{e.name}</option>)}\n\t\t\t\t</select>\n\t\t\t</div>);\n\t\t}\n\t\treturn <SelectSearch\n\t\t\toptions={options}\n\t\t\tname={name}\n\t\t\tplaceholder={\"Select a \" + name}\n\t\t\tvalue={selectedValue}\n\t\t\tsearch={name === \"club\"}\n\t        onChange={(value) => changeHandler(name, value)}\n\t\t\trenderOption={this.renderOption}\n\t\t/>\n\t}\n\n    renderOption(domProps, option, snapshot, className){\n        return <button className={className} {...domProps}>\n\t        {option.color &&\n\t            <span className={\"dot\"} style={{backgroundColor: option.color}}/>\n\t        }\n            {option.name}\n\t        {snapshot.selected && <FontAwesomeIcon icon={faCheck} />}\n        </button>\n\t}\n\n\tsearchSelect = (_, selectedId) => {\n\t\tconst selectedClubs = this.props.nodes.find((e) => {\n\t\t\treturn selectedId === e.id\n\t\t})\n\t\tthis.props.selectNode(selectedClubs)\n\t}\n}\n\nexport default Controls\n","import React, {Component} from 'react'\nimport {select} from 'd3-selection'\nimport {scaleBand, scaleLinear} from 'd3-scale'\nimport {axisLeft, axisBottom} from 'd3-axis'\nimport {range, max} from 'd3-array'\n\n\nclass BarChart extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.ref = React.createRef()\n\t}\n\n\tcomponentDidMount() {\n\t\tconst {data, width, height, color} = this.props\n\t\tthis.createGraph(data, width, height, color)\n\t}\n\n\tcreateGraph = (data, w, h, color) => {\n\t\tvar margin = {top: 10, right: 0, bottom: 60, left: 40}\n\t    const width = w - margin.left - margin.right\n\t    const height = h - margin.top - margin.bottom\n\n\t\tconst svg = select(this.ref.current).attr(\"viewBox\", [0, 0, w, h])\n\n\t\tconst x = scaleBand()\n\t\t\t.domain(range(data.length))\n\t\t\t.range([margin.left, width - margin.right])\n            .padding(0.1)\n\n\t\tconst y = scaleLinear()\n\t\t\t.domain([0, max(data.map(e=>[e[1]]))])\n\t\t\t.range([height, margin.top])\n\n\t\tconst xAxis = g => g\n\t\t    .attr(\"transform\", `translate(0,${h - margin.bottom - margin.top})`)\n            .call(\n            \taxisBottom(x).tickFormat(i => data[i][0]).tickSizeOuter(0)\n            ).selectAll(\"text\")\n\t\t     .style(\"text-anchor\", \"end\")\n\t\t     .attr(\"dx\", \"-.8em\")\n\t\t     .attr(\"dy\", \".15em\")\n\t\t     .attr(\"transform\", \"rotate(-65)\")\n\n\t\tconst yAxis = g => g\n\t\t    .attr(\"transform\", `translate(${margin.left},0)`)\n\t\t    .call(axisLeft(y).ticks(5))\n\t\t    .call(g => g.select(\".domain\").remove())\n\t\t    .call(g => g.append(\"text\")\n\t\t        .attr(\"x\", -margin.left)\n\t\t        .attr(\"y\", 10)\n\t\t        .attr(\"fill\", \"currentColor\")\n\t\t        .attr(\"text-anchor\", \"start\")\n\t\t        .text(data.y))\n\n\t\tsvg\n\t\t\t.append(\"g\")\n\t\t\t\t.attr(\"fill\", color)\n\t\t\t.selectAll(\"rect\")\n\t\t\t.data(data)\n\t\t\t.join(\"rect\")\n\t\t\t\t.attr(\"x\", (d, i) => x(i))\n\t\t\t\t.attr(\"y\", d => y(d[1]))\n\t\t\t\t.attr(\"height\", d =>  y(0) - y(d[1]))\n\t\t\t\t.attr(\"width\", x.bandwidth())\n\n\t\tsvg.append(\"g\").call(xAxis)\n\t\tsvg.append(\"g\").call(yAxis)\n\t}\n\n\trender() {\n\t\treturn <svg ref={this.ref}\n\t\t     width={this.props.width}\n\t\t     height={this.props.height}\n\t\t/>\n\t}\n}\n\nexport default BarChart","import React from \"react\";\n\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\nimport {faTimesCircle} from \"@fortawesome/free-solid-svg-icons\";\nimport BarChart from \"./BarChart\";\nimport {fillColor, artistLink} from \"./lib\";\n\nconst Club = (props) => {\n\tconst {club} = props;\n\tconst imgPath = `${process.env.PUBLIC_URL}/img/`;\n\tconst img =\n\t\tclub.logo === \"\" ? (\n\t\t\t<div className={\"placeholder\"}/>\n\t\t) : (\n\t\t\t<div className={\"image center\"}>\n\t\t\t\t<img src={imgPath + club.logo.split(\"/\").slice(-1)[0]}\n\t\t\t\t     alt={props.id}/>\n\t\t\t</div>\n\t\t);\n\tconst color = fillColor(club.group, props.categories);\n\tconst link = \"https://www.residentadvisor.net/club.aspx?id=\" + club.club_id;\n\n\treturn (\n\t\t<div key={club.club_id} className={\"clubPanel\"}>\n        <div className=\"clubName\">\n\t        <button\n\t          className={\"close\"}\n\t          onClick={(e) => props.onNodeClick(club)}\n\t        >\n            <FontAwesomeIcon icon={faTimesCircle} />\n\t        </button>\n\t        <h3 className=\"clubTitle\" style={{ backgroundColor: color }}>\n\t\t\t\t<a rel={\"noopener noreferrer\"} target={\"_blank\"} href={link}>\n\t                {club.id}\n\t            </a>\n\t        </h3>\n        </div>\n\t\t\t{img}\n\t\t\t<div className={\"center\"}>\n\t\t\t\t{club.region}\n\t\t\t\t{club.region === club.country ? \"\" : \" - \" + club.country}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nconst Table = ({header, data}) => {\n\treturn (\n\t\t<tr key={header + \"row\"}>\n\t\t\t<td key={header + \"cell\"}>{header}</td>\n\t\t\t{data.map((e, i) => {\n\t\t\t\treturn <td key={header + \"-\" + i}>{e}</td>;\n\t\t\t})}\n\t\t</tr>\n\t);\n};\n\nconst ClubTable = (props) => {\n\tconst mostCommonArtists = () => {\n\t\treturn props.clubs.map((node, i) => {\n\t\t\treturn Object.entries(node.artists)\n\t\t\t\t.sort((a, b) => b[1] - a[1])\n\t\t\t\t.slice(0, 5)\n\t\t\t\t.map((e, j) => {\n\t\t\t\t\tconst key = \"artist\" + i + \"-\" + j;\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<li key={key}>\n\t\t\t\t\t\t\t{artistLink(e[0], props.data.artist_names_to_ids)}\n\t\t\t\t\t\t\t{\" - \" + e[1]}\n\t\t\t\t\t\t</li>\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t});\n\t};\n\n\tconst mostSimilarClubs = () => {\n\t\treturn props.clubs.map((f) => {\n\t\t\treturn props.data.links\n\t\t\t\t.filter((e) => {\n\t\t\t\t\treturn [e.source, e.target].includes(f.id);\n\t\t\t\t})\n\t\t\t\t.sort((a, b) => b.weight - a.weight)\n\t\t\t\t.slice(0, 5)\n\t\t\t\t.reduce((acc, e) => {\n\t\t\t\t\tconst club = e.source !== f.id ? e.source : e.target;\n\t\t\t\t\tacc.push(\n\t\t\t\t\t\t<li key={club}>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName={\"clubButton\"}\n\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\tprops.onClubClick(club, f)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{club}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t{\" - \" + (e.weight * 100).toFixed() + \"%\"}\n\t\t\t\t\t\t</li>\n\t\t\t\t\t);\n\t\t\t\t\treturn acc;\n\t\t\t\t}, []);\n\t\t});\n\t};\n\n\tconst rows = props.clubs.map((club) => {\n\t\treturn [\n\t\t\tclub.number_of_dates,\n\t\t\tclub.number_of_unique_artists,\n\t\t\tclub.total_number_of_artists,\n\t\t\tclub.followers,\n\t\t\t(club.attending / club.number_of_dates).toFixed(1),\n\t\t\t(\n\t\t\t\tclub.total_number_of_artists / club.number_of_unique_artists || 0\n\t\t\t).toFixed(1),\n\t\t\t(club.total_number_of_artists / club.number_of_dates).toFixed(2),\n\t\t];\n\t});\n\n\tconst headers = [\n\t\t\"Number of events\",\n\t\t\"Unique artists\",\n\t\t\"Total artists booked\",\n\t\t\"Followers\",\n\t\t\"Average event attendance\",\n\t\t\"Average bookings per artist\",\n\t\t\"Average artists per date\",\n\t];\n\n\tlet tableRows = headers\n\t\t.map((e, i) => {\n\t\t\treturn (\n\t\t\t\t<tr key={i}>\n\t\t\t\t\t<td key={e}>{e}</td>\n\t\t\t\t\t{rows.map((e, j) => (\n\t\t\t\t\t\t<td key={i + \"-\" + j}>{e[i]}</td>\n\t\t\t\t\t))}\n\t\t\t\t</tr>\n\t\t\t);\n\t\t})\n\t\t.concat(<Table key=\"artist-table\" header=\"Most Booked Artists\"\n\t\t               data={mostCommonArtists()}/>)\n\t\t.concat(<Table key=\"club-table\" header=\"Most Similar Clubs\"\n\t\t               data={mostSimilarClubs()}/>);\n\n\tconst header =\n\t\trows.length !== 2 ? null : (\n\t\t\t<thead>\n\t\t\t<tr>\n\t\t\t\t<th key={\"empty\"}/>\n\t\t\t\t{props.clubs.map((e) => (\n\t\t\t\t\t<th key={e.id}>{e.id}</th>\n\t\t\t\t))}\n\t\t\t</tr>\n\t\t\t</thead>\n\t\t);\n\treturn (\n\t\t<table>\n\t\t\t{header}\n\t\t\t<tbody>{tableRows}</tbody>\n\t\t</table>\n\t);\n};\n\nconst ClubGroup = (props) => {\n\tconst club = props.clubs[0];\n\tconst groupClubs = props.data.nodes.filter((e) => {\n\t\treturn club.group === e.group && e.id !== club.id;\n\t});\n\tif (groupClubs.length < 2) {\n\t\treturn <h3 className={\"cluster\"}>No other clubs in this cluster</h3>;\n\t}\n\n\tconst stats = groupClubs.reduce((acc, e) => {\n\t\tacc[e.region] = acc[e.region] + 1 || 1;\n\t\treturn acc;\n\t}, {});\n\n\tconst color = fillColor(club.group, props.categories);\n\treturn (\n\t\t<div className={\"cluster\"}>\n\t\t\t<h3>Other clubs in this cluster</h3>\n\t\t\t<BarChart\n\t\t\t\tdata={Object.entries(stats)}\n                width={Math.min(window.outerWidth / 2, 312)}\n\t\t\t\theight={230}\n\t\t\t\tcolor={color}\n\t\t\t/>\n\t\t\t<ul>\n\t\t\t\t{groupClubs.map((childClub) => (\n\t\t\t\t\t<li key={childClub.id}>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName={\"clubButton\"}\n\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\tprops.onClubClick(childClub.id, club);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{childClub.id}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</li>\n\t\t\t\t))}\n\t\t\t</ul>\n\t\t</div>\n\t);\n};\n\nconst Similarities = (props) => {\n\tconst artists = props.clubs.reduce((acc, e) => {\n\t\tacc.push(Object.keys(e.artists));\n\t\treturn acc;\n\t}, []);\n\tconst union = artists[0].filter((e) => artists[1].includes(e));\n\n\tif (union.length === 0) {\n\t\treturn (\n\t\t\t<div className={\"similarities\"}>\n\t\t\t\t<h4>No overlap in lineups - no common artists</h4>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tconst ids = props.clubs.map((e) => e.id);\n\tconst overlap = (\n\t\tprops.data.links.find((e) => {\n\t\t\treturn ids.includes(e.source) && ids.includes(e.target);\n\t\t}).weight * 100\n\t).toFixed(2);\n\n\treturn (\n\t\t<div className={\"similarities\"}>\n\t\t\t<h4>\n\t\t\t\t{overlap}% overlap in lineups - {union.length} common artists:\n\t\t\t</h4>\n\t\t\t<ul>\n\t\t\t\t{union.map((artistName) => (\n\t\t\t\t\t<li key={artistName}>\n\t\t\t\t\t\t{artistLink(artistName, props.data.artist_names_to_ids)}\n\t\t\t\t\t</li>\n\t\t\t\t))}\n\t\t\t</ul>\n\t\t</div>\n\t);\n};\n\nconst Panel = (props) => {\n\tconst {clubs} = props;\n\treturn (\n\t\t<div className={`clubDetail  ${clubs.length > 0 ? 'visible' : ''}`}>\n\t\t\t<div className={\"clubInfo\"}>\n\t\t\t\t{clubs.map((club) => (\n\t\t\t\t\t<Club key={club.id} {...props} club={club}/>\n\t\t\t\t))}\n\t\t\t\t<ClubTable {...props} />\n\t\t\t</div>\n\t\t\t{clubs.length === 1 && <ClubGroup {...props} />}\n\t\t\t{clubs.length === 2 && <Similarities {...props} />}\n\t\t</div>\n\t);\n};\n\nexport default Panel;\n","import React, {Component} from 'react'\nimport './container.scss'\nimport ScrollyTelling from \"./ScrollyTelling\"\nimport {BeeSwarmChart} from \"./charts/BeeSwarmChart\"\nimport {CandleStickChart} from \"./charts/CandleStickChart\"\nimport {ClusterChart} from \"./charts/ClusterChart\"\nimport {ChartWrapper} from \"./charts/ChartWrapper\"\nimport Controls from \"./Controls\"\nimport ClubPanel from \"./clubPanel\";\nimport getDeviceType from './utils/getDeviceType'\n\nclass Container extends Component {\n\tisMobile = getDeviceType() === \"mobile\"\n\tcontrolHeight = this.isMobile ? 0 : 70\n\tmargin = this.isMobile? (\n\t\t\t{top: 10, right: 20, bottom: 10, left: 10}\n\t\t):(\n\t\t\t{top: 60, right: 20, bottom: 20, left: 50}\n\t)\n\tresizeFunctionId = 0\n\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.ref = React.createRef()\n\t\t// these are the currently selected values\n\t\t// if you need all values, you should use this.props.data\n\t\tthis.nodes = this.props.data.nodes\n\t\tthis.clubButtonClickHandler  = this.clubButtonClickHandler.bind(this)\n\t\tthis.state = {\n\t\t\tselectedNodes: [],\n\t\t\tdata: {},\n\t\t\tfilters: {},\n\t\t\tdraw: true,\n\t\t\tchartType: \"Cluster\",\n\t\t\theight: document.documentElement.clientHeight,\n\t\t\twidth: document.documentElement.clientWidth,\n\t\t\tsvgWidth: document.documentElement.clientWidth,\n\t\t\tsvgHeight: document.documentElement.clientHeight - this.controlHeight,\n\t\t\tcategories: []\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('resize', this.onResize)\n\t}\n\n\tcomponentDidMount() {\n\t\t// sort so adjacent groups get different colors\n\t\tthis.categories = [\n\t\t\t...new Set(this.nodes.map(e => e.group).sort((a, b) => {\n\t\t\t\treturn a % 2 - b % 2 || a - b\n\t\t\t}))\n\t\t]\n\t\tthis.setState({categories:this.categories})\n\t\tconst svg = this.ref.current\n\t\tthis.chartWrapper = new ChartWrapper(\n\t\t\tsvg, this.margin, this.categories,\n\t\t\tthis.state.svgHeight, this.state.svgWidth,\n\t\t\tClusterChart\n\t\t)\n\t\twindow.addEventListener('resize', this.onResize)\n\t}\n\n\tonNodeClick = (node) => {\n\t\t// we allow max two selected nodes at a time\n\t\tlet selectedNodes = (this.state.selectedNodes || [])\n\t\tconst index = selectedNodes.indexOf(node)\n\t\tif (index !== -1){\n\t\t\tselectedNodes.splice(index, 1)\n\t\t}else{\n\t\t\tselectedNodes.push(node)\n\t\t}\n\t\tselectedNodes = selectedNodes.slice(-2)\n\t\tthis.setState({selectedNodes: selectedNodes})\n\t}\n\n\tclubButtonClickHandler(clubId, parentClub){\n\t\tconst club = this.nodes.find(e => e.id === clubId)\n\t\t// we want to maintain the position of the parent club in selected club\n\t\tconst selectedClubs = this.state.selectedNodes[0] === parentClub?\n\t\t\t[parentClub, club] : [club, parentClub]\n\t\tthis.setState({selectedNodes: selectedClubs})\n\t}\n\n\tcomponentDidUpdate( prevProps, prevState){\n\t\tconst filters = this.state.filters\n\t\tif (Object.keys(filters).length !== 0){\n\t\t\tthis.nodes = this.props.data.nodes.filter((e) => {\n\t\t\t\treturn Object.keys(filters).every((f) => {\n\t\t\t\t\treturn filters[f] === \"all\" || e[f] === filters[f]\n\t\t\t\t})\n\t\t\t})\n\t\t}else{\n\t\t\tthis.nodes = this.props.data.nodes\n\t\t}\n\t\tif (this.state.chartType !== prevState.chartType){\n\t\t    this.chartWrapper.setChartType(this.nodes, this.getChartType())\n\t\t}\n\n\t\tif (this.state.draw){\n\t\t\tif (this.chartWrapper.chart.initial){\n\t\t\t\tthis.chartWrapper.chart.createGraph(this.nodes)\n\t\t\t}\n\t\t\tthis.chartWrapper.chart.drawGraph(\n\t\t\t\tthis.nodes,\n\t\t\t\tthis.onNodeClick,\n\t\t\t\tthis.state.selectedNodes\n\t\t\t)\n\t\t}\n\t}\n\n\tgetChartType(){\n\t\tif (this.state.chartType === \"Cluster\"){\n\t\t\treturn ClusterChart\n\t\t}\n\t\tif (this.state.chartType === \"CandleStick\"){\n\t\t\treturn CandleStickChart\n\t\t}\n\t\tif (this.state.chartType === \"BeeSwarm\"){\n\t\t\treturn BeeSwarmChart\n\t\t}\n\t}\n\n\tsetFilters = (key, value) => {\n\t\tconst filter = {}\n\t\tfilter[key] = value\n\t\tthis.setState({\"filters\": filter, \"selectedNodes\": []})\n\t}\n\n\tdidDimensionsChange(){\n\t\t// only resize if dimensions actually changed\n\t\tconst d = document.documentElement\n\t\treturn this.state.height !== d.clientHeight && this.state.width !== d.clientWidth\n\t}\n\n\tonResize = () => {\n\t\tif (this.didDimensionsChange()){\n\t\t\t// only resize after resizing is likely complete\n\t\t\tclearTimeout(this.resizeFunctionId)\n\t\t\tthis.resizeFunctionId = setTimeout(\n\t\t\t\tthis.updateWindowDimensions, 500\n\t\t\t);\n\t\t}\n\t}\n\n\tupdateWindowDimensions = () => {\n\t\tconst w = document.documentElement.clientWidth\n\t\tconst h = document.documentElement.clientHeight\n\t\tthis.setState({\n\t\t\twidth: w, height: h, svgWidth: w, svgHeight: h - this.controlHeight\n\t\t})\n\t\tthis.chartWrapper.dimensionChange(h, w)\n\t\tthis.chartWrapper.setChartType(this.nodes, this.getChartType())\n\t}\n\n\t// hack so on step enter can change the selectedNodes\n\tsetAsyncState = (newState) => new Promise(\n\t\t(resolve) => this.setState(newState, resolve)\n\t)\n\n    onStepEnter = ({element, data, direction}) => {\n\t    if (data){\n\t    \t// reset any selection from user before setting step data\n\t    \tthis.setAsyncState({selectedNodes: []}).then(this.setState(data))\n\t    }\n\t}\n\n\trender() {\n\t\tconst controls = this.state.chartType !== \"CandleStick\" && <Controls\n\t\t\tnodes={this.props.data.nodes}\n\t\t\tcategories={this.state.categories}\n\t\t\tfilters={this.state.filters}\n\t\t\tselectedNodes={this.state.selectedNodes}\n\t\t\tfilterChange={this.setFilters}\n\t\t\tselectNode={this.onNodeClick}\n\t\t\tisMobile={this.isMobile}\n\t\t/>\n\t\treturn <div className=\"container\" id={\"start\"}>\n\t\t\t{controls}\n\t\t\t<div id={\"tooltip\"} />\n\t\t\t<ScrollyTelling\n\t\t\t\tenter={this.onStepEnter}\n\t\t\t\tnodes={this.props.data.nodes}\n\t\t\t\tlinks={this.props.data.links}\n\t\t\t/>\n\t\t\t<div className={\"graphic\"}>\n\t\t\t\t<svg\n\t\t\t\t\tonClick={() => this.setState({selectedNodes: []})}\n\t\t\t\t\tref={this.ref}\n\t\t\t\t\twidth={this.state.svgWidth}\n\t\t\t\t\theight={this.state.svgHeight}\n\t\t\t\t/>\n\t\t\t\t<ClubPanel\n\t\t\t\t\tonClubClick={this.clubButtonClickHandler}\n\t\t\t\t\tonNodeClick={this.onNodeClick}\n\t\t\t\t\tcategories={this.categories}\n\t\t\t\t\tclubs={this.state.selectedNodes}\n\t\t\t\t\tdata={this.props.data}\n\t\t\t\t/>\n\t\t\t</div>\n\n        </div>\n\t}\n}\n\nexport default Container","import {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\"\nimport {faSyncAlt, faMobileAlt} from \"@fortawesome/free-solid-svg-icons\"\nimport React from \"react\"\nimport './rotate.scss';\n\n\nfunction Rotate(){\n\treturn <div className=\"rotate\">\n\t\t<div className={\"center\"}>\n\t\t\t<h2>\n\t\t\t\tPlease turn your phone to landscape mode to properly view\n\t\t\t\tthis webpage.\n\t\t\t</h2>\n\t\t\t<FontAwesomeIcon icon={faMobileAlt}/>\n\t\t\t<FontAwesomeIcon icon={faSyncAlt} spin={true}/>\n\t\t\t<h2>\n\t\t\t\tThanks!\n\t\t\t</h2>\n\t\t</div>\n\t</div>\n}\n\nexport default Rotate","import React, {Component} from 'react'\nimport './sections.scss';\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\"\nimport { faChevronDown } from '@fortawesome/free-solid-svg-icons'\nimport Rotate from \"./Rotate\"\n\nclass Intro extends Component {\n\trender(){\n\t\tconst content = <>\n\t\t\t<h1 className=\"center\">\n\t\t\t\tClubster Analysis\n\t\t\t</h1>\n\t\t\t<h3>\n\t\t\t\t Comparing the bookings at the worlds most popular nightclubs\n\t\t\t</h3>\n\t\t\t<p>\n\t\t\t\tHow similar or different are the line ups of the most popular nightclubs in the world?\n\t\t\t\tWhich clubs rely on residents and which have endlessly rotating talent?\n\t\t\t\tHow similar are the bookings of clubs in different countries and continents?\n\t\t\t\tAre the super clubs different from the underground venues?\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\tIn an attempt to answer these questions and others like them we looked\n\t\t\t\tat the most recommended clubs for the most popular regions on the\n\t\t\t\treputable website <a href=\"https://www.residentadvisor.net/events\">Resident Advisor (RA)</a>.\n\t\t\t\tWe gathered all their listings for 2019 and then compared\n\t\t\t\tthe clubs based on the djs and artists who played there that year.\n\t\t\t\tTake a look to see how your favourite club fits in.\n\t\t\t</p>\n\t\t\t<h3>\n\t\t\t\tScroll down to get started!\n\t\t\t</h3>\n\t\t\t<div className={'scrollDown center'}>\n\t\t\t\t<a href=\"#start\">\n\t\t\t\t\t<FontAwesomeIcon icon={faChevronDown} />\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</>\n\t\treturn <Section content={content} intro={true}/>\n\t}\n}\n\nclass Outro extends Component {\n\trender (){\n\t\tconst content = <>\n\t\t\t<p>\n\t\t\t\tThat concludes this analysis of the bookings and line ups for\n\t\t\t\tthe most recommended clubs in the most popular regions on Resident\n\t\t\t\tAdvisor. We hope it has provided insight into how these clubs are\n\t\t\t\talike and different and given you a glimpse of how the world of\n\t\t\t\telectronic dance music worked in 2019.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\tThe data was retrieved in April to May 2020.\n\t\t\t\tIf you'd like to learn more you can view all the <a href=\"https://github.com/Kalli/clubster-analysis\">code</a> for\n\t\t\t\tretrieving and visualising this data. If you have any questions\n\t\t\t\tyou can reach me on <a href=\"https://twitter.com/karltryggvason\">twitter</a> or\n\t\t\t\tthrough <a href=\"mailto:ktryggvason@gmail.com\">email</a>.\n\t\t\t</p>\n\t\t\t<p>\n\t\t\t\tA <a href=\"https://lazilyevaluated.co/\">Lazily Evaluated</a> production.\n\t\t\t\tBy <a href=\"https://karltryggvason.com/\">Karl Tryggvason</a> and <a href=\"http://mtryggvason.github.io/\">Magns Felix Tryggvason</a>\n\t\t\t</p>\n\t\t</>\n\t\treturn <Section content={content} intro={false} />\n\t}\n}\n\nclass Section extends Component {\n\trender(){\n\t\tconst contentClass = \"sectionsContent \" + (\n\t\t\t!this.props.intro? \"bottom\" : \"\"\n\t\t)\n\t\treturn <div className={\"sections\"}>\n\t\t\t<div className={ this.props.intro? \"top\" : \"\"} />\n\t\t\t<Rotate />\n\t\t\t<div className={contentClass}>\n\t\t\t\t<div className=\"jumbotron\">\n\t\t\t\t\t{this.props.content}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t}\n}\n\nexport {Intro, Outro}","import React, {Component} from 'react'\nimport './navbar.scss'\n\n\nclass Navbar extends Component {\n\trender() {\n\t\treturn <nav className=\"navbar\" id={'nav'}>\n\t\t\t<h1 className=\"center\">\n\t\t\t\t<a href=\"http://lazilyevaluated.co/\">\n\t\t\t\tLazily Evaluated\n\t\t\t\t</a>\n\t\t\t</h1>\n\t\t</nav>\n\t}\n}\n\nexport default Navbar","import React, {Component} from 'react';\nimport Container from './Container'\nimport {Intro, Outro} from './Sections'\nimport Navbar from './navbar'\n\nclass App extends Component {\n\n\tconstructor(props) {\n        super(props)\n        this.state = {\n            loading: true,\n\t        data: {}\n        }\n    }\n\n    loadData() {\n        fetch(`${process.env.PUBLIC_URL}/network-2019.json`)\n            .then( (response) => {\n                return response.json()\n            })\n            .then( (data) => {\n            \t// change arrays into objects\n\t            data.nodes = data.nodes.map(e =>{\n\t            \treturn e.reduce((acc, e, i) => {\n\t            \t\tacc[data.node_keys[i]] = e\n\t            \t\treturn acc\n\t\t            }, {})\n\t            })\n\t            data.links = data.links.map(e =>{\n\t            \treturn e.reduce((acc, e, i) => {\n\t            \t\tacc[data.link_keys[i]] = e\n\t            \t\treturn acc\n\t\t            }, {})\n\t            })\n            \tthis.setState({\n\t\t            loading: false,\n\t\t            data: data,\n            \t})\n            });\n    }\n\n\tcomponentDidMount() {\n        this.setState({\n\t        loading: true,\n            data: this.loadData()\n        })\n    }\n\n    render(){\n\t    const container = this.state.loading? '' : <Container\n\t\t    data={this.state.data}\n\t    />\n        return (\n            <>\n\t            <Navbar />\n\t            {<Intro />}\n                {container}\n\t            {<Outro />}\n            </>\n        )\n    }\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}