(this["webpackJsonpclubster-analysis"]=this["webpackJsonpclubster-analysis"]||[]).push([[0],{37:function(t,e,n){},50:function(t,e,n){t.exports=n.p+"static/media/steps.bc0e7744.md"},58:function(t,e,n){t.exports=n(73)},63:function(t,e,n){},69:function(t,e,n){},70:function(t,e,n){},71:function(t,e,n){},72:function(t,e,n){},73:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),i=n(44),s=n.n(i),o=n(3),c=n(4),l=n(5),u=n(6),h=n(9),d=(n(63),n(53)),f=n(12),m=n(20),p=n(1),g=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).createGraph=function(t,e,n,r){var i=10,s=0,o=70,c=40,l=e-c-s,u=n-i-o,h=Object(d.a)(a.ref.current).attr("viewBox",[0,0,e,n]),g=Object(f.a)().domain(Object(p.f)(t.length)).range([c,l-s]).padding(.1),b=Object(f.b)().domain([0,Object(p.d)(t.map((function(t){return[t[1]]})))]).range([u,i]);h.append("g").attr("fill",r).selectAll("rect").data(t).join("rect").attr("x",(function(t,e){return g(e)})).attr("y",(function(t){return b(t[1])})).attr("height",(function(t){return b(0)-b(t[1])})).attr("width",g.bandwidth()),h.append("g").call((function(e){return e.attr("transform","translate(0,".concat(n-o-i,")")).call(Object(m.a)(g).tickFormat((function(e){return t[e][0]})).tickSizeOuter(0)).selectAll("text").style("text-anchor","end").attr("dx","-.8em").attr("dy",".15em").attr("transform","rotate(-65)")})),h.append("g").call((function(e){return e.attr("transform","translate(".concat(c,",0)")).call(Object(m.b)(b).ticks(5)).call((function(t){return t.select(".domain").remove()})).call((function(e){return e.append("text").attr("x",-c).attr("y",10).attr("fill","currentColor").attr("text-anchor","start").text(t.y)}))}))},a.ref=r.a.createRef(),a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var t=this.props,e=t.data,n=t.width,a=t.height,r=t.color;this.createGraph(e,n,a,r)}},{key:"render",value:function(){return r.a.createElement("svg",{ref:this.ref,width:this.props.width,height:this.props.height})}}]),n}(a.Component),b=n(17),v=n(18),y=n(39),x=n(49),k=n.n(x),w=n(50),j=n.n(w),E=(n(69),n(8)),O=n(21),_=(n(37),n(77)),N=n(26),S=function(){function t(e,n,a,r,i){Object(o.a)(this,t),this.svg=e,this.initial=!0,this.margin=n,this.categories=a,this.width=i-this.margin.left-this.margin.right,this.height=r-this.margin.top-this.margin.bottom,this.legend=null,this.active=!0,this.t=Object(N.b)().duration(1500)}return Object(c.a)(t,[{key:"createGraph",value:function(t){this.g||(this.g=Object(d.a)(this.svg).append("g").attr("class","graph"),this.node=this.g.selectAll("circle")),this.g.transition(1e3).attr("transform","translate(0, 0), scale(1)")}},{key:"highlightSelected",value:function(t){this.g.selectAll(".nodes").style("opacity",(function(e){return t.includes(e)?.6:1})),this.g.selectAll(".label").attr("text-decoration",(function(e){return t.includes(e)?"underline":""}))}},{key:"exit",value:function(){this.active=!1,Object(_.a)(".legend").transition(2500).style("opacity",0).remove()}}]),t}(),C=n(80);function M(t,e){return Object(C.a)(e.indexOf(t)/e.length)}var T=function t(e){return e>1?t(e-1)*e:1};var A=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t,a,r,i,s){var c;return Object(o.a)(this,n),(c=e.call(this,t,a,r,i,s)).y=function(t){return t.group},c.x=function(t){return 0!==t.number_of_unique_artists?t.total_number_of_artists/t.number_of_unique_artists:0},c.drawGraph=function(t,e,n){c.filterNodes(t),c.initial&&c.calculateInitialPositions(),c.node=c.node.data(c.nodes,(function(t){return t.id})),c.node.exit().remove();var a=c.node.enter().append("g");a.append("circle").attr("r",c.radius).attr("fill",(function(t){return M(t.group,c.categories)})).attr("class","nodes").style("fill-opacity",c.initial?1:0),a.append("text").style("opacity","0").style("display","none").text((function(t){return t.id+" - "+c.x(t).toFixed(2)})),c.node=c.node.merge(a),c.initial&&c.node.transition(c.t).attr("transform",(function(t){return"translate("+t.x+","+t.y+")"})),c.highlightSelected(n),c.initial=!1},c.calculateInitialPositions=function(){var t=Math.floor(c.yScale.step()/c.radius);c.nodes.forEach((function(e,n){var a=Math.floor(Math.random()*t);e.x=c.xScale(c.x(e)),e.y=c.yScale(c.y(e))+a*c.radius}))},c.filterNodes=function(t){c.nodes=t.filter((function(t){return 0!==c.x(t)&&t.number_of_unique_artists>20&&t.number_of_dates>10}))},c.groups=[],c.radius=15,c}return Object(c.a)(n,[{key:"createGraph",value:function(t){var e=this;Object(O.a)(Object(E.a)(n.prototype),"createGraph",this).call(this,t),this.filterNodes(t),this.groups=Object(h.a)(new Set(this.nodes.map((function(t){return e.y(t)})))),this.xScale=Object(f.b)().domain([1,Object(p.d)(this.nodes,(function(t){return e.x(t)}))]).range([this.margin.left,this.width-this.margin.right-this.margin.left]),this.yScale=Object(f.a)().domain(this.groups).range([this.margin.top,this.height+this.margin.top-this.margin.bottom]),this.createLegend(),this.node.selectAll("circle").transition(this.t).attr("r",this.radius),this.node.selectAll("text").transition(this.t).style("opacity","0").style("display","none").text((function(t){return t.id+" - "+e.x(t).toFixed(2)}))}},{key:"createLegend",value:function(){var t=this.height+this.margin.top-this.margin.bottom,e="translate(0, ".concat(t,")");this.legend=Object(d.a)(this.svg).append("g").attr("class","legend").attr("transform",e);var n=Object(m.a)(this.xScale).tickValues(this.xScale.ticks().concat(this.xScale.domain()));this.legend.call(n);var a="translate(0, ".concat(this.margin.top+20,")");Object(d.a)(this.svg).append("g").attr("transform",a).attr("class","label legend").append("text").text("Average number of bookings per artist by club in 2019")}}]),n}(S),W=n(22),D=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t,a,r,i,s){var c;return Object(o.a)(this,n),(c=e.call(this,t,a,r,i,s)).y=function(t){return c.groups.indexOf(t)},c.x=function(t){return 0!==t.number_of_unique_artists?t.total_number_of_artists/t.number_of_unique_artists:0},c.candleStickData=function(){var t=c.nodes.reduce((function(t,e){var n=e[c.groupBy];return t[n]?t[n].push(e):t[n]=[e],t}),{});return Object.keys(t).reduce((function(e,n){var a=t[n].sort((function(t,e){return c.x(e)-c.x(t)})),r=a.map((function(t){return c.x(t)})).sort();return e.push({percentile_95:r[Math.floor(.95*r.length)-1],percentile_5:r[Math.ceil(.05*r.length)],mean:r.reduce((function(t,e){return t+e}),0)/r.length,max:Math.max.apply(Math,Object(h.a)(r)),min:Math.min.apply(Math,Object(h.a)(r)),count:r.length,id:n,nodes:a}),e}),[]).filter((function(t){return t.count>1}))},c.drawGraph=function(t,e,n){c.filterNodes(t),c.node=c.node.data(c.data,(function(t){return t.id})),c.newNode=c.node.enter().append("g").attr("class","candlestick"),c.exitPrevChart(),c.newNode.on("click",(function(t){return c.click(t)})),c.tooltip=Object(d.a)("#tooltip"),c.node=c.node.merge(c.newNode),c.initial=!1},c.click=function(t){c.tooltipData!==t?(c.tooltip.transition().duration(200).style("opacity",1),c.tooltip.html(c.detail(t)).style("left",W.c.pageX+"px").style("top",W.c.pageY-28+"px"),c.tooltipData=t):(c.tooltip.transition().duration(500).style("opacity",0),c.tooltipData=null)},c.filterNodes=function(t){c.nodes=t.filter((function(t){return 0!==c.x(t)&&t.number_of_unique_artists>20&&t.number_of_dates>10}))},c.groups=[],c.tooltipData=null,c}return Object(c.a)(n,[{key:"createGraph",value:function(t){var e=this;Object(O.a)(Object(E.a)(n.prototype),"createGraph",this).call(this,t),this.groupBy="region",this.filterNodes(t),this.data=this.candleStickData(),this.groups=Object(h.a)(new Set(this.data.map((function(t){return t.id})))),this.xScale=Object(f.b)().domain([1,Object(p.d)(this.nodes,(function(t){return e.x(t)}))]).range([this.margin.left,this.width-this.margin.right-this.margin.left]),this.yScale=Object(f.a)().domain(Array.from(Array(this.groups.length).keys())).range([this.margin.top,this.height+this.margin.top-this.margin.bottom]),this.createLegend(),this.bw=this.yScale.bandwidth()}},{key:"exitPrevChart",value:function(){var t=this,e=0;this.node.exit().each((function(){return e++})).attr("class","candlestick").transition("exit").duration(2e3).attr("transform",(function(e){var n=t.data.filter((function(n){return n.id===e[t.groupBy]}))[0],a=n?t.xScale(n.mean):0,r=t.yScale(t.y(e.region))+t.bw/2;return 0===a?"scale(0, 0)":"translate("+a+","+(r||0)+")"})).on("end",(function(){0===--e&&t.drawBox()})).transition().duration(2e3).remove()}},{key:"drawBox",value:function(){var t=this,e=0;this.newNode.each((function(){return e++})).append("rect").attr("height",0).attr("width",0).attr("class","fill").attr("x",(function(e){return t.xScale(e.mean)})).attr("rx",15).attr("y",(function(e){return t.yScale(t.y(e.id))+t.bw/2})).attr("ry",15).transition("drawbox").duration(1e3).attr("height",this.bw).attr("x",(function(e){return t.xScale(e.percentile_5)})).attr("y",(function(e){return t.yScale(t.y(e.id))})).attr("width",(function(e){return t.xScale(e.percentile_95)-t.xScale(e.percentile_5)})).on("end",(function(){0===--e&&(t.drawWhiskers(),t.drawMean(),t.addLabel())}))}},{key:"drawWhiskers",value:function(){var t=this,e=this.bw/2;this.newNode.append("line").attr("x1",(function(e){return t.xScale(e.percentile_5)})).attr("x2",(function(e){return t.xScale(e.percentile_5)})).attr("y1",(function(n){return t.yScale(t.y(n.id))+e})).attr("y2",(function(n){return t.yScale(t.y(n.id))+e})).attr("class","line").transition("drawWhiskers1").duration(1e3).attr("x2",(function(e){return t.xScale(e.min)})),this.newNode.append("line").attr("x1",(function(e){return t.xScale(e.percentile_95)})).attr("x2",(function(e){return t.xScale(e.percentile_95)})).attr("y1",(function(n){return t.yScale(t.y(n.id))+e})).attr("y2",(function(n){return t.yScale(t.y(n.id))+e})).attr("class","line").transition("drawWhiskers2").duration(1e3).attr("x2",(function(e){return t.xScale(e.max)}))}},{key:"addLabel",value:function(){var t=this;this.newNode.append("text").attr("x",(function(e){var n=t.xScale(e.percentile_5);return n+(t.xScale(e.percentile_95)-n)/2})).attr("y",(function(e){return t.yScale(t.y(e.id))+t.bw/2})).attr("text-anchor","middle").attr("class","label").style("fill","#fff").style("font-size",12).text((function(t){return"".concat(t.id," (").concat(t.count,")")}))}},{key:"drawMean",value:function(){var t=this;this.newNode.append("line").attr("x1",(function(e){return t.xScale(e.mean)})).attr("x2",(function(e){return t.xScale(e.mean)})).attr("y1",(function(e){return t.yScale(t.y(e.id))})).attr("y2",(function(e){return t.yScale(t.y(e.id))+t.bw})).attr("class","mean")}},{key:"createLegend",value:function(){var t=this.height+this.margin.top-this.margin.bottom,e="translate(0, ".concat(t,")");this.legend=Object(d.a)(this.svg).append("g").attr("class","legend").attr("transform",e);var n=Object(m.a)(this.xScale).tickValues(this.xScale.ticks().concat(this.xScale.domain()));this.legend.call(n);var a="translate(0, ".concat(this.margin.top+20,")");Object(d.a)(this.svg).append("g").attr("transform",a).attr("class","label legend").append("text").text("Average number of bookings per artist by region in 2019")}},{key:"detail",value:function(t){var e=t.nodes.map((function(t){return"<tr>\n\t\t\t\t<td>".concat(t.id,"</td>\n\t\t\t\t<td>\n\t\t\t\t\t").concat((t.total_number_of_artists/t.number_of_unique_artists).toFixed(1),"\n\t\t\t\t</td>\n\t\t\t</tr>")}));return'<h2 class="center">'.concat(t.id,"</h2>\n\t\t\t<table>\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th>Club Name</th>\n\t\t\t\t\t<th>Average bookings per artist</th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t").concat(e.join(""),"\n\t\t\t</tbody>\n\t\t</table>")}}]),n}(S),F=n(23),B=n(81),G=n(52),L=n(51),q={A:7,a:7,B:8,b:7,C:8,c:6,D:9,d:7,E:7,e:7,F:7,f:4,G:9,g:7,H:9,h:7,I:3,i:3,J:5,j:3,K:8,k:6,L:7,l:3,M:11,m:11,N:9,n:7,O:9,o:7,P:8,p:7,Q:9,q:7,R:8,r:4,S:8,s:6,T:7,t:4,U:9,u:7,V:7,v:6,W:11,w:9,X:7,x:6,Y:7,y:6,Z:7,z:5,".":2,",":2,":":2,";":2};function H(t,e){var n=t.split("").reduce((function(t,n){return t.length<1.6*e&&(t.length=t.length+(q[n]||q.a),t.text=t.text+n),t}),{length:0,text:""}).text;return n===t?t:n+"..."}var z=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t,a,r,i,s){var c;return Object(o.a)(this,n),(c=e.call(this,t,a,r,i,s)).decay=function(){var t=Object(L.c)((function(e){var n=e/3e3;c.simulation.force("collide").strength(Math.pow(n,2)),n>=1&&(t.stop(),c.simulation.force("x",null),c.simulation.force("y",null),c.simulation.force("center",null),c.simulation.force("cluster",c.cluster().strength(.1)))}))},c.zoom=function(t){c.active&&t.attr("transform",W.c.transform)},c.drawGraph=function(t,e,n){c.initial||c.simulation.stop(),c.initial&&c.calculateInitialPositions(t),c.node=c.node.data(t,(function(t){return t.id})),c.node.exit().transition().duration(2e3).style("opacity",0).remove();var a=c.node.enter().append("g").on("click",(function(t){return e(t)})).call(Object(B.a)().on("start",(function(t){return c.dragstarted(t,c.simulation)})).on("drag",(function(t){return c.dragged(t)})).on("end",(function(t){return c.dragended(t,c.simulation)})));a.append("circle").attr("r",(function(t){return c.calculateRadius(t)})).attr("fill",(function(t){return M(t.group,c.categories)})).attr("class","nodes").style("fill-opacity",c.initial?1:0).transition().duration(2e3).style("fill-opacity",1),a.append("text").attr("text-anchor","middle").attr("class","label").style("fill","#fff").style("opacity",0).style("font-size",12).text((function(t){return H(t.id,t.radius)})).transition().duration(2e3).style("opacity",1),c.node=c.node.merge(a),c.initial||(c.simulation.alphaTarget(.3).restart(),setTimeout((function(){c.simulation.alphaTarget(0)}),100),c.decay()),c.highlightSelected(n),c.simulation.on("tick",c.tick).nodes(t),c.initial=!1},c.calculateInitialPositions=function(t){var e=Math.min(c.width,c.height)/2,n=Math.max.apply(Math,Object(h.a)(t.map((function(t){return t.group}))));c.clusters=new Array(n),t.forEach((function(t){var a=t.group,r=a/n*2*Math.PI;t.x=Math.cos(r)*e+c.width/2+Math.random(),t.y=Math.sin(r)*e+c.height/2+Math.random();var i=c.calculateRadius(t);t.radius=i,(!c.clusters[a]||i>c.clusters[a])&&(c.clusters[t.group]=t)}))},c.tick=function(){c.node.attr("transform",(function(t){return"translate("+t.x+","+t.y+")"}))},c.cluster=function(){var t,e=.1,n=function(n){n*=e*n,t.forEach((function(t){var e=c.clusters[t.group];if(e!==t){var a=t.x-e.x,r=t.y-e.y,i=Math.sqrt(a*a+r*r),s=t.radius+e.radius;i!==s&&(i=(i-s)/i*n,t.x-=a*=i,t.y-=r*=i,e.x+=a,e.y+=r)}}))};return n.initialize=function(e){t=e},n.strength=function(t){return e=null==t?e:t,n},n},c.dragstarted=function(t,e){c.active&&(W.c.active||e.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y)},c.dragged=function(t){c.active&&(t.fx=W.c.x,t.fy=W.c.y)},c.dragended=function(t,e){c.active&&(W.c.active||e.alphaTarget(0),t.fx=null,t.fy=null)},c.clusters={},c}return Object(c.a)(n,[{key:"createGraph",value:function(t){var e=this;Object(O.a)(Object(E.a)(n.prototype),"createGraph",this).call(this,t);this.simulation=Object(F.c)().force("center",Object(F.a)(this.width/2,this.height/2)).force("x",Object(F.d)(this.width/2).strength(.01)).force("y",Object(F.e)(this.height/2).strength(.01)).force("cluster",this.cluster().strength(.5)).force("collide",Object(F.b)((function(t){return t.radius+1}))),this.zoomHandler=Object(G.a)().scaleExtent([.8,5]).filter((function(){return"wheel"!==W.c.type||"svg"!==W.c.target.nodeName})).on("zoom",(function(){return e.zoom(e.g)})),Object(d.a)(this.svg).call(this.zoomHandler),this.decay(),this.createLegend(),this.node.selectAll("circle").transition(this.t).attr("r",(function(t){return e.calculateRadius(t)})),this.node.selectAll("text").transition(this.t).style("opacity","1").style("display","block").text((function(t){return H(t.id,t.radius)}))}},{key:"createLegend",value:function(){var t=this,e=[1e4,1e3,100,10],n=e.map((function(e){return t.calculateRadius({followers:e})})),a=this.height-2*Math.max.apply(Math,Object(h.a)(n));this.legend=Object(d.a)(this.svg).append("g").attr("class","legend").attr("x",10).attr("y",a).attr("transform","translate(".concat(10,", ").concat(a,")")).style("text-align","center");var r=Math.max.apply(Math,Object(h.a)(n));this.legend.selectAll("rects").data(n).enter().append("circle").attr("cx",r).attr("cy",(function(t){return 2*r-t+15})).attr("r",(function(t){return t})).attr("fill","white").attr("stroke","black").attr("alignment-baseline","middle"),this.legend.selectAll("rects").data(n).enter().append("text").attr("x",r).attr("y",(function(t,e){return 0===e?2*r-1.4*t:1===e?2*r-1.2*t:2*r-t+15})).text((function(t,n){return e[n]})).attr("text-anchor","middle"),this.legend.append("text").text("RA Club Followers").attr("text-anchor","middle").attr("x",r).attr("y",2*r+30)}},{key:"exit",value:function(){Object(O.a)(Object(E.a)(n.prototype),"exit",this).call(this),this.simulation.stop()}},{key:"calculateRadius",value:function(t){var e=Math.min(this.width,this.height)/800;return 12*Math.log(Math.sqrt(t.followers))*e}}]),n}(S),I=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).stepsData=[{draw:!0,filters:{region:"all"},selectedNodes:[],scroll:!0},{filters:{region:"Berlin"},chartType:z,selectedNodes:[]},{filters:{country:"all"},chartType:z,selectedNodes:[]},{filters:{region:"all"},chartType:A,selectedNodes:[]},{filters:{region:"all"},chartType:A,selectedNodes:[]},{filters:{region:"all"},chartType:D,selectedNodes:[]}],a.state={steps:null},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var t=this,e=this.props.links.reduce((function(t,e){return t.weight>e.weight?t:e}),{weight:0}),n=e.source,a=e.target,r=e.weight;this.stepsData[2].selectedNodes=this.props.nodes.filter((function(t){return[112491,5031].includes(t.club_id)}));var i=this.props.nodes.length,s=this.props.links.reduce((function(t,e){return t+e.weight}),0)/this.props.links.length,o=Math.floor(T(i)/(2*T(i-2))),c=(this.props.nodes.reduce((function(t,e){return 0!==e.number_of_unique_artists?t+e.total_number_of_artists/e.number_of_unique_artists:t}),0)/i).toFixed(2),l={$clubCount:i,$linkCount:this.props.links.length,$source:n,$target:a,$weight:(100*r).toFixed(0),$combinations:o,$averageWeight:(100*s).toFixed(.2),$averageResidency:c};fetch(j.a).then((function(t){return t.text()})).then((function(e){var n=k()(e);Object.keys(l).forEach((function(t){return n=n.replace(t,l[t])}));var a=n.split("<hr>");t.setState({steps:a})}))}},{key:"step",value:function(t){return r.a.createElement("div",{className:"step "},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:t}}))}},{key:"render",value:function(){var t=this;if(!this.state.steps)return"";var e=this.state.steps.map((function(e,n){return r.a.createElement(y.b,{key:n,data:t.stepsData[n]},t.step(e))}));return r.a.createElement("div",{className:"scroller"},r.a.createElement(y.a,{onStepEnter:this.props.enter,offset:.75,debug:!0},e))}}]),n}(a.Component),R=function(){function t(e,n,a,r,i,s){Object(o.a)(this,t),this.svg=e,this.initial=!0,this.margin=n,this.categories=a,this.h=r,this.w=i,this.chart=new s(e,n,a,r,i)}return Object(c.a)(t,[{key:"setChartType",value:function(t,e){this.chart.exit();var n=new e(this.svg,this.margin,this.categories,this.h,this.w);n.g=this.chart.g,n.node=this.chart.node,n.initial=!0,n.createGraph(t),this.chart=n}}]),t}(),P=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).controlHeight=70,a.margin={top:10,right:20,bottom:20,left:50},a.onNodeClick=function(t){var e=a.state.selectedNodes||[],n=e.indexOf(t);-1!==n?e.splice(n,1):e.push(t),e=e.slice(-2),a.setState({selectedNodes:e})},a.setFilters=function(t){var e={},n="rank"===t.target.name&&"all"!==t.target.value?parseInt(t.target.value):t.target.value;e[t.target.name]=n,a.setState({filters:e,selectedNodes:[]})},a.updateWindowDimensions=function(){var t=document.documentElement.clientWidth,e=document.documentElement.clientHeight;a.setState({width:t,height:e,svgWidth:t,svgHeight:e-a.controlHeight})},a.onStepEnter=function(t){t.element;var e=t.data;t.direction;console.log(e),e&&a.setState(e)},a.ref=r.a.createRef(),a.nodes=a.props.data.nodes,a.state={selectedNodes:[],data:{},filters:{},draw:!0,chartType:z,width:document.documentElement.clientWidth,svgWidth:document.documentElement.clientWidth,svgHeight:document.documentElement.clientHeight-a.controlHeight},a}return Object(c.a)(n,[{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"componentDidMount",value:function(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions),this.categories=Object(h.a)(new Set(this.nodes.map((function(t){return t.group})).sort((function(t,e){return t%2-e%2||t-e}))));var t=this.ref.current;this.chartWrapper=new R(t,this.margin,this.categories,this.state.svgHeight,this.state.svgWidth,this.state.chartType)}},{key:"createTable",value:function(t,e){return r.a.createElement("tr",{key:t+"row"},r.a.createElement("td",{key:t+"cell"},t),e.map((function(e,n){return r.a.createElement("td",{key:t+"-"+n},e)})))}},{key:"mostCommonArtists",value:function(){var t=this;return this.state.selectedNodes.map((function(e,n){return Object.entries(e.artists).sort((function(t,e){return e[1]-t[1]})).slice(0,5).map((function(e,a){var i="artist"+n+"-"+a;return r.a.createElement("li",{key:i},t.artistLink(e[0])," - "+e[1])}))}))}},{key:"mostSimilarClubs",value:function(){var t=this;return this.state.selectedNodes.map((function(e){return t.props.data.links.filter((function(t){return[t.source,t.target].includes(e.id)})).sort((function(t,e){return e.weight-t.weight})).slice(0,5).reduce((function(n,a){var r=a.source!==e.id?a.source:a.target;return n.push(t.clubButton(e,r,a.weight)),n}),[])}))}},{key:"clubButton",value:function(t,e){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return r.a.createElement("li",{key:e},r.a.createElement("button",{className:"clubButton",onClick:function(a){return n.clubButtonClickHandler(e,t)}},e)," ",a?" - "+(100*a).toFixed()+"%":"")}},{key:"clubButtonClickHandler",value:function(t,e){var n=this.nodes.find((function(e){return e.id===t})),a=this.state.selectedNodes[0]===e?[e,n]:[n,e];this.setState({selectedNodes:a})}},{key:"artistLink",value:function(t){return function(t,e){var n=e[t]||t.toLowerCase().replace(" ","");return r.a.createElement("a",{href:"https://www.residentadvisor.net/dj/"+n,rel:"noopener noreferrer",target:"_blank"},t)}(t,this.props.data.artist_names_to_ids)}},{key:"showSimilarities",value:function(){var t=this;if(2!==this.state.selectedNodes.length)return"";var e=this.state.selectedNodes.reduce((function(t,e){return t.push(Object.keys(e.artists)),t}),[]),n=e[0].filter((function(t){return e[1].includes(t)}));if(0===n.length)return r.a.createElement("div",{className:"similarities"},r.a.createElement("h4",null,"No overlap in lineups - no common artists"));var a=this.state.selectedNodes.map((function(t){return t.id})),i=(100*this.props.data.links.find((function(t){return a.includes(t.source)&&a.includes(t.target)})).weight).toFixed(2);return r.a.createElement("div",{className:"similarities"},r.a.createElement("h4",null,i,"% overlap in lineups - ",n.length," common artists:"),r.a.createElement("ul",null,n.map((function(e){return r.a.createElement("li",{key:e},t.artistLink(e))}))))}},{key:"componentDidUpdate",value:function(t,e){var n=this.state.filters;0!==Object.keys(n).length?this.nodes=this.props.data.nodes.filter((function(t){return Object.keys(n).every((function(e){return"all"===n[e]||t[e]===n[e]}))})):this.nodes=this.props.data.nodes,this.state.chartType&&(console.log(this.state.chartType.name),console.log(this.chartWrapper.chart.constructor.name),this.state.chartType.name!==this.chartWrapper.chart.constructor.name&&this.chartWrapper.setChartType(this.nodes,this.state.chartType)),this.state.draw&&(this.chartWrapper.chart.initial&&this.chartWrapper.chart.createGraph(this.nodes),this.chartWrapper.chart.drawGraph(this.nodes,this.onNodeClick,this.state.selectedNodes))}},{key:"showClubs",value:function(){var t=this,e=this.state.selectedNodes;return r.a.createElement("div",{className:"clubInfo"+e.length},e.map((function(e){return t.showClub(e)})),this.createClubTable())}},{key:"showClub",value:function(t){var e=this,n="".concat("/clubster-analysis","/img/"),a=""===t.logo?r.a.createElement("div",{className:"placeholder"}):r.a.createElement("div",{className:"image center"},r.a.createElement("img",{src:n+t.logo.split("/").slice(-1)[0],alt:t.id})),i=M(t.group,this.categories),s="https://www.residentadvisor.net/club.aspx?id="+t.club_id;return r.a.createElement("div",{key:t.club_id,className:"clubPanel"},r.a.createElement("button",{className:"clubButton",id:"close",onClick:function(n){return e.onNodeClick(t)}},r.a.createElement(b.a,{icon:v.d})),r.a.createElement("h3",{style:{backgroundColor:i},className:"clubName"},r.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:s},t.id)),a,r.a.createElement("div",{className:"center"},t.region,t.region===t.country?"":" - "+t.country))}},{key:"createClubTable",value:function(){if(0===this.state.selectedNodes.length)return"";var t=this.state.selectedNodes.map((function(t){return[t.number_of_dates,t.number_of_unique_artists,t.total_number_of_artists,t.followers,(t.attending/t.number_of_dates).toFixed(1),(t.total_number_of_artists/t.number_of_unique_artists).toFixed(1),(t.total_number_of_artists/t.number_of_dates).toFixed(2)]})),e=["Number of events","Unique artists","Total artists booked","Followers","Average event attendance","Average bookings per artist","Average artists per date"].map((function(e,n){return r.a.createElement("tr",{key:n},r.a.createElement("td",{key:e},e),t.map((function(t,e){return r.a.createElement("td",{key:n+"-"+e},t[n])})))})).concat(this.createTable("Most Booked Artists",this.mostCommonArtists())).concat(this.createTable("Most Similar Clubs",this.mostSimilarClubs())),n=2!==t.length?null:r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{key:"empty"}),this.state.selectedNodes.map((function(t){return r.a.createElement("th",{key:t.id},t.id)}))));return r.a.createElement("table",null,n,r.a.createElement("tbody",null,e))}},{key:"showGroup",value:function(){var t=this;if(1!==this.state.selectedNodes.length)return"";var e=this.state.selectedNodes[0],n=this.props.data.nodes.filter((function(t){return e.group===t.group}));if(1===n.length)return"";var a=n.reduce((function(t,e){return t[e.region]=t[e.region]+1||1,t}),{}),i=M(e.group,this.categories);return r.a.createElement("div",{style:{width:"50%"}},r.a.createElement("h3",null,"Other clubs in this cluster"),r.a.createElement(g,{data:Object.entries(a),width:312,height:210,color:i}),r.a.createElement("ul",null,n.map((function(n){return t.clubButton(e,n.id)}))))}},{key:"showClubInfo",value:function(){return 0===this.state.selectedNodes.length?r.a.createElement("div",{className:"clubDetail hidden"}):r.a.createElement("div",{className:"clubDetail visible"},this.showClubs(),this.showGroup(),this.showSimilarities())}},{key:"render",value:function(){return r.a.createElement("div",{className:"container",id:"start"},r.a.createElement("div",{id:"tooltip"}),r.a.createElement(I,{enter:this.onStepEnter,nodes:this.props.data.nodes,links:this.props.data.links}),r.a.createElement("div",{className:"graphic"},r.a.createElement("svg",{ref:this.ref,width:this.state.svgWidth,height:this.state.svgHeight}),this.showClubInfo()))}}]),n}(a.Component);n(70),n(71);var $=function(){return r.a.createElement("div",{className:"rotate"},r.a.createElement("div",{className:"center"},r.a.createElement("h2",null,"Please turn your phone to landscape mode to properly view this webpage."),r.a.createElement(b.a,{icon:v.b}),r.a.createElement(b.a,{icon:v.c,spin:!0}),r.a.createElement("h2",null,"Thanks!")))},U=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var t=r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"center"},"Clubster Analysis"),r.a.createElement("h3",null,"Comparing the bookings at the worlds most popular nightclubs"),r.a.createElement("p",null,"How similar or different are the line ups of the most popular nightclubs in the world? Which clubs rely on residents and which have djs rotate through? How different are the super clubs from the more underground fare?"),r.a.createElement("p",null,"In an attempt to answer these questions and others like them we looked at the most recommended clubs for the most popular regions on the reputable website ",r.a.createElement("a",{href:"https://www.residentadvisor.net/events"},"Resident Advisor (RA)"),". We gathered all their listings for 2019 and then compared the clubs based on djs and artists that played there that year. Take a look to see how your favourite club fits in."),r.a.createElement("h3",null,"Scroll down to get started!"),r.a.createElement("div",{className:"scrollDown center"},r.a.createElement("a",{href:"#start"},r.a.createElement(b.a,{icon:v.a}))));return r.a.createElement(K,{content:t,intro:!0})}}]),n}(a.Component),J=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var t=r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"That concludes this analysis of the bookings and line ups for the most recommended clubs in the most popular regions on Resident Advisor. I hope it has provided insight into how these clubs are alike and different and given you a glimpse of how the world of electronic dance music worked in 2019."),r.a.createElement("p",null,"The data was retrieved in April to May 2020. If you'd like to learn more you can view all the ",r.a.createElement("a",{href:"https://github.com/Kalli/clubster-analysis"},"code")," for retrieving and visualising this data. If you have any questions you can reach me on ",r.a.createElement("a",{href:"https://twitter.com/karltryggvason"},"twitter")," or through ",r.a.createElement("a",{href:"mailto:ktryggvason@gmail.com"},"email"),"."),r.a.createElement("p",null,"A ",r.a.createElement("a",{href:"https://lazilyevaluated.co/"},"Lazily Evaluated")," production. By ",r.a.createElement("a",{href:"https://karltryggvason.com/"},"Karl Tryggvason")," and ",r.a.createElement("a",{href:"https://soundcloud.com/moffandtarkin"},"Magn\xfas Felix Tryggvason")));return r.a.createElement(K,{content:t,intro:!1})}}]),n}(a.Component),K=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var t="sectionsContent "+(this.props.intro?"":"bottom");return r.a.createElement("div",{className:"sections"},r.a.createElement("div",{className:this.props.intro?"top":""}),r.a.createElement($,null),r.a.createElement("div",{className:t},r.a.createElement("div",{className:"jumbotron"},this.props.content)))}}]),n}(a.Component),V=(n(72),function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar",id:"nav"},r.a.createElement("h1",{className:"center"},r.a.createElement("a",{href:"http://lazilyevaluated.co/"},"Lazily Evaluated")))}}]),n}(a.Component)),X=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).state={loading:!0,data:{}},a}return Object(c.a)(n,[{key:"loadData",value:function(){var t=this;fetch("".concat("/clubster-analysis","/network-2019.json")).then((function(t){return t.json()})).then((function(e){e.nodes=e.nodes.map((function(t){return t.reduce((function(t,n,a){return t[e.node_keys[a]]=n,t}),{})})),e.links=e.links.map((function(t){return t.reduce((function(t,n,a){return t[e.link_keys[a]]=n,t}),{})})),t.setState({loading:!1,data:e})}))}},{key:"componentDidMount",value:function(){this.setState({loading:!0,data:this.loadData()})}},{key:"render",value:function(){var t=this.state.loading?"":r.a.createElement(P,{data:this.state.data});return r.a.createElement(r.a.Fragment,null,r.a.createElement(V,null),r.a.createElement(U,null),t,r.a.createElement(J,null))}}]),n}(a.Component);s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(X,null)),document.getElementById("root"))}},[[58,1,2]]]);
//# sourceMappingURL=main.2c3030f0.chunk.js.map